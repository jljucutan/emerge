<div id="task_summary_outer">
    <div id="EditProfile_container">
        <div id="EditProfile_wrapper">
            <div id="EditProfile">
                <h2>Kirkland &amp; Ellis PS Hiring Information</h2>

                <div class="heading">
                    <span class="heading-inner">
                        Legal Name
                    </span>
                </div>
                <div data-only-display-for="HKG,GBR,CHN" class="input_wrapper" data-fieldgroup-title="Prefix">
                    <span class="floating-label">Prefix</span>
                    <$client.env.inputPrefix>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Last Name" data-fieldgroup-validation="required">
                    <span class="floating-label">Last Name</span>
                    <$client.env.inputLegal_Last_Name>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="First Name" data-fieldgroup-validation="required">
                    <span class="floating-label">First Name</span>
                    <$client.env.inputLegal_First_Name>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Middle Name" data-fieldgroup-validation="required">
                    <span class="floating-label">Middle Name</span>
                    <$client.env.inputLegal_Middle_Name>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Suffix">
                    <span class="floating-label">Suffix</span>
                    <$client.env.inputSuffix>
                </div>

                <div class="mb-18"></div>
                <div class="heading">
                    <span class="heading-inner">
                        Preferred Name*
                    </span>
                </div>
                <p>
                    Preferred Name is how your name will appear in the Firm Directory and will be used when creating your business email address.
                </p>
                <div class="input_wrapper" data-fieldgroup-title="Last Name">
                    <span class="floating-label">Last Name</span>
                    <$client.env.inputPreferred_Last_Name>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="First Name">
                    <span class="floating-label">First Name</span>
                    <$client.env.inputPreferred_First_Name>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Middle Name">
                    <span class="floating-label">Middle Name</span>
                    <$client.env.inputPreferred_Middle_Name>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Suffix">
                    <span class="floating-label">Suffix</span>
                    <$client.env.inputPreferred_Suffix>
                </div>
                <div class="mb-18"></div>

                <div class="heading">
                    <span class="heading-inner">
                        Personal Information
                    </span>
                </div>
                <div class="input_wrapper">
                    <span class="floating-label">Date of Birth</span>
                    <input type="text" id="DOB_pseudo" name="DOB_pseudo" value="<$client.tForWhomUserInfo.DOB>" data-title="Date of Birth" data-validation="required" data-date-enabled="false">
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Birth Country">
                    <span class="floating-label">Birth Country</span>
                    <$client.env.inputBirth_Country>
                </div>
                <div data-only-display-for="DEU" class="input_wrapper" data-fieldgroup-title="Birth Location" data-fieldgroup-validation="required">
                    <span class="floating-label">Birth Location</span>
                    <$client.env.inputBirth_Location>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Gender" data-fieldgroup-validation="required">
                    <span class="floating-label">Gender</span>
                    <$client.env.inputGender>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Marital Status" data-fieldgroup-validation="required">
                    <span class="floating-label">Marital Status</span>
                    <$client.env.inputMaritalStatus>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Highest Education Level">
                    <span class="floating-label">Highest Education Level</span>
                    <$client.env.inputHighest_Educ_Lvl>
                </div>
                <div class="mb-18"></div>

                <div class="heading">
                    <span class="heading-inner">
                        Citizenship
                    </span>
                </div>
                <section class="national-id">
                    <div class="input_wrapper" data-fieldgroup-title="National ID Country" data-fieldgroup-validation="required">
                        <span class="floating-label">National ID Country</span>
                        <$client.env.inputNational_ID_Country-1>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="National ID Type" data-fieldgroup-validation="required">
                        <span class="floating-label">National ID Type</span>
                        <$client.env.inputNational_ID_Type_1>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="National ID Number" data-fieldgroup-validation="required">
                        <span class="floating-label">National ID Number</span>
                        <$client.env.inputNational_ID_Number_1>
                    </div>
                    <div class="input_wrapper clearfix">
                        <button class="lifesuite__button bg-ignite remove-section pull-right" type="button" role="button">Remove</button>
                    </div>
                </section>
                <section class="national-id">
                    <div class="input_wrapper" data-fieldgroup-title="National ID Country" data-fieldgroup-validation="required">
                        <span class="floating-label">National ID Country</span>
                        <$client.env.inputNational_ID_Country-2>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="National ID Type" data-fieldgroup-validation="required">
                        <span class="floating-label">National ID Type</span>
                        <$client.env.inputNational_ID_Type_2>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="National ID Number" data-fieldgroup-validation="required">
                        <span class="floating-label">National ID Number</span>
                        <$client.env.inputNational_ID_Number_2>
                    </div>
                    <div class="input_wrapper clearfix">
                        <button class="lifesuite__button bg-ignite remove-section pull-right" type="button" role="button">Remove</button>
                    </div>
                </section>
                <section class="national-id">
                    <div class="input_wrapper" data-fieldgroup-title="National ID Country" data-fieldgroup-validation="required">
                        <span class="floating-label">National ID Country</span>
                        <$client.env.inputNational_ID_Country-3>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="National ID Type" data-fieldgroup-validation="required">
                        <span class="floating-label">National ID Type</span>
                        <$client.env.inputNational_ID_Type_3>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="National ID Number" data-fieldgroup-validation="required">
                        <span class="floating-label">National ID Number</span>
                        <$client.env.inputNational_ID_Number_3>
                    </div>
                    <div class="input_wrapper clearfix">
                        <button class="lifesuite__button bg-ignite remove-section pull-right" type="button" role="button">Remove</button>
                    </div>
                </section>
                <section class="national-id">
                    <div class="input_wrapper" data-fieldgroup-title="National ID Country" data-fieldgroup-validation="required">
                        <span class="floating-label">National ID Country</span>
                        <$client.env.inputNational_ID_Country-4>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="National ID Type" data-fieldgroup-validation="required">
                        <span class="floating-label">National ID Type</span>
                        <$client.env.inputNational_ID_Type_4>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="National ID Number" data-fieldgroup-validation="required">
                        <span class="floating-label">National ID Number</span>
                        <$client.env.inputNational_ID_Number_4>
                    </div>
                    <div class="input_wrapper clearfix">
                        <button class="lifesuite__button bg-ignite remove-section pull-right" type="button" role="button">Remove</button>
                    </div>
                </section>
                <div class="input_wrapper">
                    <button id="add-additional-citizenship" type="button" role="button" class="lifesuite__button bg-jade pull-right">Add Additional Citizenship</button>
                </div>
                <div class="mb-18"></div>

                <div class="heading">
                    <span class="heading-inner">
                        Contact Information
                    </span>
                </div>
                <div class="heading">
                    <span class="heading-inner">
                        Home Address
                    </span>
                </div>
                <p>
                    Your Home Address should reflect where you live. A Mailing address is where you prefer to receive you mail.
                </p>
                <p>
                    By Selecting "Yes" on the publishable checkboxes you are granting permission to display this information in the Firm's internal directories. For privacy concerns, you may choose to "opt-out" of publishing certain information. Your preferences may be changed at any time.
                </p>
                <div class="input_wrapper" data-fieldgroup-title="Home Address 1" data-fieldgroup-validation="required">
                    <span class="floating-label">Home Address 1</span>
                    <$client.env.inputCurrent_Address1>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Home Address 2">
                    <span class="floating-label">Home Address 2</span>
                    <$client.env.inputCurrent_Address2>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Home Address 3">
                    <span class="floating-label">Home Address 3</span>
                    <$client.env.inputCurrent_Address3>
                </div>
                <div data-only-display-for="USA" class="input_wrapper" data-fieldgroup-title="Home Address 4">
                    <span class="floating-label">Home Address 4</span>
                    <$client.env.inputCurrent_Address4>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Country" data-fieldgroup-validation="required">
                    <span class="floating-label">Country</span>
                    <$client.env.inputCurrent_Country>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="City" data-fieldgroup-validation="required">
                    <span class="floating-label">City</span>
                    <$client.env.inputCurrent_City>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="State" data-fieldgroup-validation="required">
                    <span class="floating-label">State</span>
                    <$client.env.inputCurrent_State>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Postal Code" data-fieldgroup-validation="required">
                    <span class="floating-label">Postal Code</span>
                    <$client.env.inputCurrent_Postal_Code>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Country" data-fieldgroup-targetlabel="#current_publish_label" data-fieldgroup-validation="required">
                    <label id="current_publish_label">Would you like this address published?</label>
                    <$client.env.inputcurrent_publish>
                </div>
                <div class="mb-18"></div>

                <div class="heading">
                    <span class="heading-inner">
                        Mailing Address
                    </span>
                </div>
                <p>
                    Your Home Address should reflect where you live. A Mailing address is where you prefer to receive you mail.
                </p>
                <p>
                    By Selecting "Yes" on the publishable checkboxes you are granting permission to display this information in the Firm's internal directories. For privacy concerns, you may choose to "opt-out" of publishing certain information. Your preferences may be changed at any time.
                </p>
                <div class="input_wrapper" data-fieldgroup-title="Country" data-fieldgroup-targetlabel="#Mailing_Address_Same_label" data-fieldgroup-validation="required">
                    <label id="Mailing_Address_Same_label">Is your Mailing Address the same as Home?</label>
                    <$client.env.inputMailing_Address_Same>
                </div>
                <section class="mailing-address">
                    <div class="input_wrapper" data-fieldgroup-title="Mail Address 1" data-fieldgroup-validation="required">
                        <span class="floating-label">Mail Address 1</span>
                        <$client.env.inputMail_Address1>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Mail Address 2">
                        <span class="floating-label">Mail Address 2</span>
                        <$client.env.inputMail_Address2>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Mail Address 3">
                        <span class="floating-label">Mail Address 3</span>
                        <$client.env.inputMail_Address3>
                    </div>
                    <div data-only-display-for="USA" class="input_wrapper" data-fieldgroup-title="Mail Address 4">
                        <span class="floating-label">Mail Address 4</span>
                        <$client.env.inputMail_Address4>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Country" data-fieldgroup-validation="required">
                        <span class="floating-label">Country</span>
                        <$client.env.inputMail_Country>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="City" data-fieldgroup-validation="required">
                        <span class="floating-label">City</span>
                        <$client.env.inputMail_City>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="State" data-fieldgroup-validation="required">
                        <span class="floating-label">State</span>
                        <$client.env.inputMail_State>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Postal Code" data-fieldgroup-validation="required">
                        <span class="floating-label">Postal Code</span>
                        <$client.env.inputMail_Postal_Code>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Country" data-fieldgroup-targetlabel="#Mail_Publish_label" data-fieldgroup-validation="required">
                        <label id="Mail_Publish_label">Would you like this address published?</label>
                        <$client.env.inputMail_Publish>
                    </div>
                </section>

                <div class="heading">
                    <span class="heading-inner">
                        Phone and Email
                    </span>
                </div>
                <p>
                    Any phone marked as Cell Business will be automatically published internally for business continuity and client service purposes. The number can be personal cell number or the number associated with a Firm-issued. For non-Munich attorneys, if no number is provided, Human Resources will follow up post hire. For non-attorney staff providing a Cell Business phone number is optional. 
                </p>
                <p>
                    By Selecting "Yes" on the publishable checkboxes you are granting permission to display this information in the Firm's internal directories. For privacy concerns, you may choose to "opt-out" of publishing certain information. Your preferences may be changed at any time.
                </p>
                <div class="input_wrapper" data-fieldgroup-title="Business Cell Phone">
                    <span class="floating-label">Business Cell Phone</span>
                    <$client.env.inputmobile_business>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Country Code">
                    <span class="floating-label">Country Code</span>
                    <$client.env.inputCell_business_Country_code>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Country" data-publish-group="mobile_business" data-fieldgroup-targetlabel="#Publish_mobile_Business_label" data-fieldgroup-validation="required">
                    <label id="Publish_mobile_Business_label">Would you like this published?</label>
                    <$client.env.inputPublish_mobile_Business>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Personal Cell Phone">
                    <span class="floating-label">Personal Cell Phone</span>
                    <$client.env.inputMobile>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Country Code">
                    <span class="floating-label">Country Code</span>
                    <$client.env.inputmobile_country_code>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Country" data-publish-group="Mobile" data-fieldgroup-targetlabel="#Publish_Mobile_label" data-fieldgroup-validation="required">
                    <label id="Publish_Mobile_label">Would you like this published?</label>
                    <$client.env.inputPublish_Mobile>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Home Phone">
                    <span class="floating-label">Home Phone</span>
                    <$client.env.inputHome_Phone>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Country Code">
                    <span class="floating-label">Country Code</span>
                    <$client.env.inputHome_Phone_Country_Code>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Country" data-publish-group="Home_Phone" data-fieldgroup-targetlabel="#Publish_home_phone_label" data-fieldgroup-validation="required">
                    <label id="Publish_home_phone_label">Would you like this published?</label>
                    <$client.env.inputPublish_home_phone>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Personal Email Address" data-fieldgroup-validation="required">
                    <span class="floating-label">Personal Email Address</span>
                    <$client.env.inputPersonal_Email_Address>
                </div>
                <div class="mb-18"></div>

                <div class="heading">
                    <span class="heading-inner">
                        Job Information
                    </span>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Previous_KE" data-fieldgroup-validation="required" data-fieldgroup-targetlabel="#Previous_KE_Employee_label">
                    <label id="Previous_KE_Employee_label">Have you formerly worked for Kirkland as a Contract Worker?</label>
                    <$client.env.inputPrevious_KE_Employee>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Previous_KE" data-fieldgroup-validation="required" data-fieldgroup-targetlabel="#Previous_KE_label">
                    <label id="Previous_KE_label">Have you formerly worked for Kirkland as an Employee?</label>
                    <$client.env.inputPrevious_KE>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Action" data-fieldgroup-validation="required">
                    <span class="floating-label">Action</span>
                    <$client.env.inputAction>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Action Reason" data-fieldgroup-validation="required">
                    <span class="floating-label">Action Reason</span>
                    <$client.env.inputAction_Reason>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Practice Area" data-fieldgroup-validation="required">
                    <span class="floating-label">Practice Area</span>
                    <$client.env.inputPractice_Area>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Practice Group" data-fieldgroup-validation="required">
                    <span class="floating-label">Practice Group</span>
                    <$client.env.inputPractice_Group>
                </div>
                <div id="location-section" class="input_wrapper" data-fieldgroup-title="Location" data-fieldgroup-validation="required">
                    <span class="floating-label">Location</span>
                    <$client.env.inputLocation>
                </div>
                <div class="input_wrapper" data-hide-for="USA" data-fieldgroup-title="Expected Job End Date" data-fieldgroup-validation="required">
                    <span class="floating-label">Expected Job End Date</span>
                    <$client.env.inputExpected_Job_End_Date>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Position/Job Title" data-fieldgroup-validation="required">
                    <span class="floating-label">Position/Job Title</span>
                    <$client.env.inputPosition_Job_Title_Code>
                </div>
                <div id="supervisor-id-section" class="input_wrapper" data-fieldgroup-title="Supervisor ID" data-fieldgroup-validation="required">
                    <span class="floating-label">Supervisor ID</span>
                    <$client.env.inputSupervisor_ID>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Regular/Temporary" data-fieldgroup-validation="required">
                    <span class="floating-label">Regular/Temporary</span>
                    <$client.env.inputRegular_Temporary>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Regular Shift" data-fieldgroup-validation="required">
                    <span class="floating-label">Regular Shift</span>
                    <$client.env.inputRegular_Shift>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Full/Part" data-fieldgroup-validation="required">
                    <span class="floating-label">Full/Part</span>
                    <$client.env.inputFull_Part>
                </div>
                <div id="officer-code-section" class="input_wrapper" data-fieldgroup-title="Officer Code" data-fieldgroup-validation="required">
                    <span class="floating-label">Officer Code</span>
                    <$client.env.inputOfficer_Code>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Work Schedule" data-fieldgroup-validation="required">
                    <span class="floating-label">Work Schedule</span>
                    <$client.env.inputWork_Schedule>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Standard Hours" data-fieldgroup-validation="required">
                    <span class="floating-label">Standard Hours</span>
                    <$client.env.inputStandard_Hours>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="FTE" data-fieldgroup-validation="required">
                    <span class="floating-label">FTE</span>
                    <$client.env.inputFTE>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Country" data-fieldgroup-targetlabel="#Permanent_Remote_label" data-fieldgroup-validation="required">
                    <label id="Permanent_Remote_label">Permanent remote work arrangement?</label>
                    <$client.env.inputPermanent_Remote>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Salary Rate Code" data-fieldgroup-validation="required">
                    <span class="floating-label">Salary Rate Code</span>
                    <$client.env.inputSalary_Rate_Code>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Comp Rate" data-fieldgroup-validation="required">
                    <span class="floating-label">Comp Rate</span>
                    <$client.env.inputComp_Rate>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Annual Compensation" data-fieldgroup-validation="required">
                    <span class="floating-label">Annual Compensation</span>
                    <$client.env.inputAnnual_Compensation>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Compensation Frequency" data-fieldgroup-validation="required">
                    <span class="floating-label">Compensation Frequency</span>
                    <$client.env.inputComp_Frequency>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Probation Date" data-fieldgroup-validation="required">
                    <span class="floating-label">Probation Date</span>
                    <$client.env.inputProbation_Date>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Business Title" data-fieldgroup-validation="required">
                    <span class="floating-label">Business Title</span>
                    <$client.env.inputBusiness_Title>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Time Zone" data-fieldgroup-validation="required">
                    <span class="floating-label">Time Zone</span>
                    <$client.env.inputTime_Zone>
                </div>
                <div class="input_wrapper" data-fieldgroup-title="Earnings Distribution Type" data-fieldgroup-validation="required">
                    <span class="floating-label">Earnings Distribution Type</span>
                    <$client.env.inputEarnings_Distribution_Type>
                </div>

                <div class="mb-18"></div>

                <div class="button_group">
                    <div id="save" class="input_wrapper clearfix mb-15"></div>
                    <div id="saveandcomplete" class="input_wrapper clearfix"></div>
                    <div id="cancel" class="input_wrapper clearfix"></div>
                </div>


                <div hidden>
                    <$client.env.inputSilkroad_ID>
                    <$client.env.inputApplicantID>
                    <$client.env.inputApplicationID>
                    <$client.env.inputDOB>
                    <$client.env.inputCountry_Name_Format>
                    <$client.env.inputAddress_Type>
                    <$client.env.inputPhone_Type>
                    <$client.env.inputOffer_Letter_Date>
                    <$client.env.inputName_Type>
                    <$client.env.inputName_Type2>
                    <$client.env.inputEmail_Type>
                    <$client.env.inputPreferred_Phone>
                    <$client.env.inputCompany>
                    <$client.env.inputRegulatory_Region>
                    <$client.env.inputSalary_Amount_Currency_Code>
                    <$client.env.inputTime_Reporter>
                    <$client.env.inputWork_Period>
                    <input type="text" id="hire-date" name="hire-date" value="<$client.env.eval(client.tForWhomUserInfo.Hire_DT.subString(0,3))>-<$client.env.eval(client.tForWhomUserInfo.Hire_DT.subString(5,6))>-<$client.env.eval(client.tForWhomUserInfo.Hire_DT.subString(8,9))>" />
                    <input type="text" name="Start_Date" value="<$client.tEventDates_2.Value>" />
                    <input type="text" name="Employee_HRISID" value="<$client.tForWhomUserInfo.Employee_HRISID>" />
                    <input id="job-code" type="text" value="<$client.tEventCategories_15.Code>">
                    <input id="office-code" type="text" value="<$client.tEventCategories_Category_21.Code>">
                    <input id="event-location-value" type="text" value="<$client.env.eval(client.tEventCategories_Category_21.Value.length()>0?client.tEventCategories_Category_21.Value:'USA')>">
                    <input id="event-location-code" type="text" value="<$client.env.eval(client.tEventCategories_Category_21.Value.length()>0?client.tEventCategories_Category_21.Code:'USA')>">
                </div>

            </div><!-- end editprofile -->
        </div>
    </div>
</div>

<script type="text/javascript" src="<$link;/main/RedCarpet/FormTemplates/FormSupport/js/moment-with-locales.min.js>"></script>
<script type="text/javascript" src="<$link;/main/RedCarpet/FormTemplates/FormSupport/js/global_date_formatter.js>"></script>
<script type="text/javascript" src="<$link;/main/RedCarpet/FormTemplates/FormSupport/js/jquery.mask.min.js>"></script>
<script type="text/javascript" src="<$link;/main/RedCarpet/FormTemplates/FormSupport/js/front_validator.js>" defer></script>

<!-- configuration files and libraries are included here  -->
<script type="text/javascript" src="<$link;/main/RedCarpet/FormTemplates/FormSupport/js/global_date_config.js>"></script>
<script type="text/javascript" src="<$link;/map_images/main/SiteGen/Onboarding/Content/UnplacedPages/shared/country_codes_config.js>"></script>
<script type="text/javascript" src="<$link;/map_images/main/SiteGen/Onboarding/Content/UnplacedPages/shared/action_reason_mapping.js>"></script>
<script type="text/javascript" src="<$link;/map_images/main/SiteGen/Onboarding/Content/UnplacedPages/shared/job_code_mapping.js>"></script>
<script type="text/javascript" src="<$link;/map_images/main/SiteGen/Onboarding/Content/UnplacedPages/shared/national_id_mapping.js>"></script>
<script type="text/javascript" src="<$link;/map_images/main/SiteGen/Onboarding/Content/UnplacedPages/shared/timezone_config.js>"></script>
<script type="text/javascript">
    const ID_TYPES = new Map(); // store id types 
    const ACTION_REASONS = new Map(); // store id types 
    const ALL_STATES = new Map(); // store all states list
    const US_STATES_LIST = ['USA-AL', 'USA-AK', 'USA-AZ', 'USA-AR', 'USA-CA', 'USA-CO', 'USA-CT', 'USA-DE', 'USA-DC', 'USA-FL', 'USA-GA', 'USA-ID', 'USA-IL', 'USA-IN', 'USA-IA', 'USA-KS', 'USA-KY', 'USA-LA', 'USA-ME', 'USA-MD', 'USA-MA', 'USA-MI', 'USA-MN', 'USA-MS', 'USA-MO', 'USA-MT', 'USA-NE', 'USA-NV', 'USA-NH', 'USA-NJ', 'USA-NM', 'USA-NY', 'USA-NC', 'USA-ND', 'USA-OH', 'USA-OK', 'USA-OR', 'USA-PA', 'USA-RI', 'USA-SC', 'USA-SD', 'USA-TN', 'USA-TX', 'USA-UT', 'USA-VT', 'USA-VA', 'USA-WA', 'USA-WV', 'USA-WI', 'USA-WY'];

    const focusInputLabel = function(obj, isFocused) {
        "use strict";
        obj.each(function(k, v) {
            const el = $(v);
            let label = el.closest('.input_wrapper')
                .find('span.floating-label')
                .removeClass('label-focus')
                .css({"color": "#1C1C1C"});
            if (el.is('select') && el.val() === null) {
                return;
            }
            if (el.val().trim().length > 0 || isFocused) {
                label.addClass('label-focus');
            }
            if (isFocused === true) {
                label.css({"color": "#1C1C1C"});
            }
        });
    }
    const fieldHasVal = function(el) {
        "use strict";
        let hasVal = false;
        $.each(el, function(k, v) {
            if ($(v).val().length) {
                hasVal = true;
            }
        });
        return hasVal;
    }
    const isCheckboxChecked = function(el) {
        "use strict";
        let hasChecked = false;
        $.each(el, function(k,v){
            if ($(v).is(':checked')) {
                hasChecked = true;
            }
        });
        return hasChecked;
    }

    const hideSection = function(section) {
        "use strict";
        if (fieldHasVal(section)) {
            section.hide().find('input').val('');
        }
    }


    const COUNTRY_TO_TYPE_MAP = new Map();
    COUNTRY_TO_TYPE_MAP.set('National_ID_Country-1', 'National_ID_Type_1');
    COUNTRY_TO_TYPE_MAP.set('National_ID_Country-2', 'National_ID_Type_2');
    COUNTRY_TO_TYPE_MAP.set('National_ID_Country-3', 'National_ID_Type_3');
    COUNTRY_TO_TYPE_MAP.set('National_ID_Country-4', 'National_ID_Type_4');

    const TYPE_TO_NUMBER_MAP = new Map();
    TYPE_TO_NUMBER_MAP.set('National_ID_Type_1', 'National_ID_Number_1');
    TYPE_TO_NUMBER_MAP.set('National_ID_Type_2', 'National_ID_Number_2');
    TYPE_TO_NUMBER_MAP.set('National_ID_Type_3', 'National_ID_Number_3');
    TYPE_TO_NUMBER_MAP.set('National_ID_Type_4', 'National_ID_Number_4');

    const extractCountryFromCode = function(countryCodes, code) {
        "use strict";
        for (let i = 0; i < countryCodes.length; i++) {
            if (countryCodes[i].codes.indexOf(code) > -1) {
                return countryCodes[i].country;
            }
        }
        return "USA";
    }

    const updateIDTypes = function() {
        "use strict";
        COUNTRY_TO_TYPE_MAP.forEach(function(v, k) {
            const idTypeSelection = $('[name$=".' + v + '"]');
            let idType = idTypeSelection.val();
            idTypeSelection.html("");
            let countryCode = $('[name$=".' + k + '"]').val();
            ID_TYPES.forEach(function(vv, kk) {
                idTypeSelection.append($('<option/>').val(kk).text(vv));
            });
            idTypeSelection.val(idType);
            if ( !NATIONAL_ID_MAP.has(countryCode) ) {
                return;
            }
            idTypeSelection.find('option').each(function(kk, vv) {
                if ( $(vv).val() == "" || ($(vv).val() in NATIONAL_ID_MAP.get(countryCode)) ) {
                    return;
                }
                $(vv).remove();
            });
        });
    };

    const validateAddressEqual = function() {
        "use strict"; 
        let isValid = true; 
        let message = ""; 
        if ( $('[name$=".Current_Address1"]').val() == $('[name$=".Mail_Address1"]').val() && $('[name$=".Mailing_Address_Same"]:checked').val() == 'N' ) {
            isValid = false;
            message = "Mailing address and current address should not be equal";
        }
        return { 
            "isValid": isValid, 
            "message": message 
        } 
    }

    const updateIDNumberFormat = function() {
        "use strict";
        TYPE_TO_NUMBER_MAP.forEach(function(v,k) {
            const typeSelection  = $('[name$=".' + k + '"]');
            const idField = $('[name$=".' + v + '"]');
            idField.mask('000-000-0000');
            let fieldIndx = k[k.length -1];
            let countrySelected = NATIONAL_ID_MAP.get($('[name$=".National_ID_Country-' + fieldIndx + '"]').val());
            if ( typeSelection.val().length > 0 && countrySelected[typeSelection.val()] != undefined ) {
                idField.mask(countrySelected[typeSelection.val()].format);
            }
        });
    }

    const updateStatesList = function(country, stateField) {
        "use strict";
        let stateValue = stateField.val();
        stateField.html('');
        ALL_STATES.forEach(function(v,k) {
            // no country selected at all
            if (country.length < 1) {
                (stateField.find('option').length < 1) && stateField.append($('<option value="" selected/>'));
                return;
            }
            // country is chosen but no corresponding state
            if (country.length && k.indexOf(country) >= 0 && stateField.find('option').length < 1) {
                stateField.append($('<option value="" selected/>'));
                return;
            }
            if ( k == "" || k.indexOf(country) == 0 ) {
                stateField.append($('<option/>').val(k).text(v));
            }
            stateField.val(stateValue);
        });
    }

    $(window).on('load', function() {
        $('.floating-label span').css('color', 'rgb(102, 102, 102)');
        $('.cal_and_button').prop({'cellpadding': 0, 'cellspacing': 0});
        let isProfileCompleted = sTaskComplete;
        // replace default submit button with paypal styled
        $('#TaskSummary_ButtonCancel').appendTo('#cancel').show();
        if (!isProfileCompleted) {
            $('#TaskSummary_ButtonSave').appendTo('#saveandcomplete').prop('onclick', null).show().text('Continue');
            $('#EUPDefaultSaveButton').appendTo('#save').show();
        }
        $('textarea').addClass('lifesuite__textarea-input');

        // storage for dropdowns, etc
        // store id types
        $('[name$=".National_ID_Type_1"] option').each(function() {
            ID_TYPES.set($(this).val(), $(this).text());
        });
        // store action reasons
        $('[name$=".Action_Reason"] option').each(function() {
            ACTION_REASONS.set($(this).val(), $(this).text());
        });
        // store all global states
        $('[name$=".Current_State"] option').each(function() {
            // filter out us territory but non us state
            if ( $(this).val().indexOf('USA') >= 0 && US_STATES_LIST.indexOf($(this).val()) < 0 ) {
                return;
            }
            ALL_STATES.set($(this).val(), $(this).text());
        });

        // load form when all set
        $('#EditProfile_wrapper').fadeIn();

        // hide fields that are not relevant
        // hide fields not in country
        $('[data-only-display-for]').each(function() {
            if ($(this).data('only-display-for').indexOf(extractCountryFromCode(COUNTRY_CODES, $('#event-location-code').val())) < 0 ) {
                $(this).hide().find('input').val('');
            }
        });
        // hide field in country
        $('[data-only-hide-for]').each(function() {
            if ($(this).data('only-hide-for').indexOf(extractCountryFromCode(COUNTRY_CODES, $('#event-location-code').val())) >= 0 ) {
                $(this).hide().find('input').val('');
            }
        });
        // get job code index base on job code
        let jobCodeIndex = JOB_CODE_MAP.map(function(item) {
            return item.jobCode;
        }).indexOf(parseInt($('#job-code').val()));
        // hide supervisor section if in job code mapping
        if (jobCodeIndex >= 0 && JOB_CODE_MAP[jobCodeIndex].supervisor) {
            $('#supervisor-id-section').show();
        }
        // hide officer code if attorney in job code map
        if (jobCodeIndex >= 0 && JOB_CODE_MAP[jobCodeIndex].hierarchy == 'Attorney') {
            $('#officer-code-section').hide();
        }
        // hide location for 101, 102, 103, 104, 105, 106, 107
        if ( [101, 102, 103, 104, 105, 106, 107].indexOf(parseInt($('#job-code').val().substring(0,3))) >= 0 ) {
            $('#location-section').hide();
        }

        // set default values
        // name type default to primary
        $('[name$=".Name_Type"]').val('PRI');
        // second name type default to primary
        $('[name$=".Name_Type2"]').val('PRF');
        // default of of national id country
        $('[name$=".Address_Type"]').val('HOME');
        // default of of national id country
        const setDefaultCountry = function() {
            "use strict";
            if ( $(this).val() == extractCountryFromCode(COUNTRY_CODES, $('#event-location-code').val()) ) {
                $(this).prop('selected', 'selected');
            }
        }
        $('[name$=".National_ID_Country-1"] option').each(function() {
            $.each($(this), setDefaultCountry);
        });
        // set default regulatory region
        $('#EditProfile [name$=".Regulatory_Region"] option').each(setDefaultCountry);
        // set default company to office they are joining
        $('#EditProfile [name$=".Company"] option').each(setDefaultCountry);
        // set Work Period to 'W' on all country except Germany
        $('[name$=".Work_Period"]').val('W');
        if ( extractCountryFromCode(COUNTRY_CODES, $('#event-location-code').val()) == 'DEU' ) {
            $('[name$=".Work_Period"]').val('GW');
        }
        // set probation date to 6 months afer hire date
        $('[name$=".Probation_Date"]').val(moment($('#hire-date').val()).add(6, 'months').subtract(1, 'days').format('M/D/YYYY'))
        // set time reporter base on exempt value in job codes
        if (jobCodeIndex >= 0) {
            document.querySelector('[name$=".Time_Reporter"]').value = JOB_CODE_MAP[jobCodeIndex].exempt ? 'E' : 'P';
        }
        // set timezone value based on joining location
        $('[name$=".Time_Zone"]').val(TIMEZONE_MAP.get($('#event-location-code').val()));

        // dependent field value manipulation depending on control field event
        // previous kirkland employee
        const previousKE = $('#EditProfile').on('change', '[name$=".Previous_KE"]', function() {
            const previousKEChecked = $('[name$=".Previous_KE"]:checked');
            if ( !previousKEChecked ) {
                return;
            }
            if ( previousKEChecked.val() == 'Y' )  {
                focusInputLabel($('[name$=".Action"]').val('Rehire'));
            }
            if ( previousKEChecked.val() == 'N' )  {
                focusInputLabel($('[name$=".Action"]').val('Hire'));
            }
            $('[name$=".Action"]').trigger('change');
        });
        $('#EditProfile [name$=".Previous_KE"]').trigger('change');

        // fields filtrations
        // update action reasons based on action field
        $('#EditProfile').on('change', '[name$=".Action"]', function() {
            const actionField = $(this);
            let filtered = [];
            ACTION_REASON_MAP.forEach(function(v, k) {
                if ( v.action != actionField.val() ) {
                    return;
                }
                switch(v.jobCodeType) {
                    case "includes":
                    if ( v.jobCode.indexOf($('#job-code').val()) >= 0 ) {
                        filtered.push(v.reasonCode);
                    }
                    break;
                    case "excludes":
                    if ( v.jobCode.indexOf($('#job-code').val()) < 0 ) {
                        filtered.push(v.reasonCode);
                    }
                    break;
                    default:
                    filtered.push(v.reasonCode);
                }
            });
            // reset action reason options
            const actionReason = $('[name$=".Action_Reason"]').html("");
            ACTION_REASONS.forEach(function(v, k) {
                actionReason.append($('<option/>').val(k).text(v));
            });
            // filter out action reason based on action reason map
            actionReason.find('option').each(function(k,v) {
                if ($(v).val() != "" && filtered.indexOf($(v).val()) < 0 ) {
                    $(v).remove();
                }
            });
        });
        // filter state by country (home address)
        $('#EditProfile').on('change', '[name$=".Current_Country"]', function() {
            const currentState = $('#EditProfile [name$=".Current_State"]');
            updateStatesList($(this).val(), currentState);
            focusInputLabel(currentState);
        });
        $('#EditProfile [name$=".Current_Country"]').trigger('change');
        // filter state by country (mailing address)
        $('#EditProfile').on('change', '[name$=".Mail_Country"]', function() {
            const currentState = $('#EditProfile [name$=".Mail_State"]');
            updateStatesList($(this).val(), currentState);
            focusInputLabel(currentState);
        });
        $('#EditProfile [name$=".Mail_Country"]').trigger('change');

        // field values calculation
        // factor of comp rate and comp frequecy in annual comp field
        const calculateAnnualComp = function() {
            "use strict";
            let compRate = new Number($('[name$=".Comp_Rate"]').val());
            compRate = !compRate.isNaN ? compRate : 0;
            const compFreq = $('[name$=".Comp_Frequency"] option:selected');
            switch (compFreq.text()) {
                case 'Semi-Monthly':
                return compRate * 24;
                break;
                case 'Monthly':
                return compRate * 12;
                break;
                default:
                return compRate * 0;
            }
        }
        const compRateFreq = $('[name$=".Comp_Rate"], [name$=".Comp_Frequency"]').on('change keyup paste', function() {
            focusInputLabel($('[name$=".Annual_Compensation"]').val(calculateAnnualComp()));
        });
        compRateFreq.trigger('change');

        // hide show fields/sections that has contents
        $.each($('.national-id').find('input,select'), function(k, v) {
            if (fieldHasVal($(v))) {
                $(v).closest('.national-id').show();
            }
        });
        const nationalIdSections = $('.national-id:visible');
        if (nationalIdSections.length < 1) {
            $('.national-id').first().show();
            $('.remove-section').hide();
        }

        // show sections by event triggers
        $('#add-additional-citizenship').on('click', function() {
            $('.national-id:hidden').first().show();
            if ($('.national-id:hidden').length < 1) {
                $(this).hide();
                return;
            }
            $('.remove-section').show();
        });

        // hide sections by event triggers
        // hide national id fields
        $('.remove-section').on('click', function() {
            const hiddenFields = $(this).closest('section').hide().find('input, select').val('');
            focusInputLabel(hiddenFields);
            if ($('.national-id:visible').length <= 1) {
                $('.remove-section').hide();
            }
            if ($('.national-id:hidden').length > 0) {
                $('#add-additional-citizenship').show();
            }
        });
        // hide mailing address field
        $('form').on('change', 'input[name$=".Mailing_Address_Same"]', function() {
            validateField($(this), false, validateAddressEqual);
            if ($(this).is(':checked') && $(this).val() == 'Y') {
                $('.mailing-address').hide().find('input').val('');
                return;
            }
            $('.mailing-address').show();
        });
        $('form input[name$=".Mailing_Address_Same"]').trigger('change');

        // hide publish selection if phone fields are empty
        const phones = $('#EditProfile [name$=".mobile_business"], #EditProfile [name$=".Mobile"], #EditProfile [name$=".Home_Phone"]');
        const phoneToPublish = phones.on('keyup paste', function() {
            let filledField = '';
            let totalFilled = 0;
            phones.each(function(k,v) {
                if (v.value.length > 0) {
                    totalFilled++;
                    filledField = $(v).prop('name').split('.')[1];
                }
            });
            // if only one if filled then it is what it is
            if (totalFilled == 1) {
                switch(filledField) {
                    case 'Home_Phone':
                    $('[name$=".Preferred_Phone"]').val('Home');
                    break;
                    case 'Mobile':
                    $('[name$=".Preferred_Phone"]').val('CEL1');
                    break;
                    default:
                    $('[name$=".Preferred_Phone"]').val('CELN');
                }
            }
            // if more than one is filled then default to business
            if (totalFilled == 0 || totalFilled > 1) {
                $('[name$=".Preferred_Phone"]').val('CELN');
            }
            // toggle publish sections
            let publishName = $(this).prop('name').split('.')[1];
            if ($(this).val().length > 0) {
                $('[data-publish-group="' + publishName + '"]').show();
                return;
            }
            focusInputLabel($('[data-publish-group="' + publishName + '"]').hide());
        });
        phoneToPublish.trigger('keyup paste');

        // remove options that does not belong to event country
        // remove countries not in event for nation IDs; only needed this once
        $('[name$=".National_ID_Country-1"] option, [name$=".National_ID_Country-2"] option, [name$=".National_ID_Country-3"] option, [name$=".National_ID_Country-4"] option').each(function() {
            let optionsToRetain = [""];
            COUNTRY_CODES.forEach(function(v,k) {
                optionsToRetain.push(v.country);
            });
            if ($.inArray($(this).val(), optionsToRetain) == -1) {
                $(this).remove();
            }
        });
        // remove id types not in country selected
        const nationalIdCounties = $('[name$=".National_ID_Country-1"], [name$=".National_ID_Country-2"], [name$=".National_ID_Country-3"], [name$=".National_ID_Country-4"]').on('change', function() {
            updateIDTypes(); 
        });
        nationalIdCounties.trigger('change');

        // update field format based on id types field
        const idTypeSelections = $('[name$=".National_ID_Type_1"], [name$=".National_ID_Type_2"], [name$=".National_ID_Type_3"], [name$=".National_ID_Type_4"]').on('change', function() {
            updateIDNumberFormat();
        });
        idTypeSelections.trigger('change');

        // datepickers
        $('#EditProfile #DOB_pseudo, #EditProfile [name$=".Expected_Job_End_Date"], #EditProfile [name$=".Probation_Date"]') 
            .formatDatePicker(dateConfig, extractCountryFromCode(COUNTRY_CODES, $('#event-location-code').val()))
            .datepicker('setDate', $('[name$=".DOB_display"]').datepicker('getDate'))
            .datepicker("option", "onSelect", function(dateText, instance) {
                $('[name$=".DOB_display"]').datepicker('setDate', $(this).datepicker('getDate'));
                validateField($(this)); 
                focusInputLabel($(this));
            });

        // focus style text and select fields
        $('form').on('focus', 'input[type="text"], select, textarea', function() {
            focusInputLabel($(this), true);
        }).on('blur', 'input[type="text"], select, textarea', function() {
            focusInputLabel($(this));
        });
        // focus field labels
        $.each($('form input[type="text"], form select, form textarea'),function(k,v) {
            focusInputLabel($(v));
        });

        // pass validation data to each fields
        $.each($('[data-fieldgroup-validation]'), function(k,v) {
            $(v).find('input, select, textarea').data('validation', $(v).data('fieldgroup-validation'));
        });
        // pass regex data to each fields
        $.each($('[data-fieldgroup-regex]'), function(k,v) {
            $(v).find('input, textarea').data('regex', $(v).data('fieldgroup-regex'));
        });
        // pass regex message to each fields
        $.each($('[data-fieldgroup-message]'), function(k,v) {
            $(v).find('input, textarea').data('message', $(v).data('fieldgroup-message'));
        });
        // pass validation data length to each fields
        $.each($('[data-fieldgroup-minlength]'), function(k,v) {
            $(v).find('input, textarea').data('minlength', $(v).data('fieldgroup-minlength'));
        });
        $.each($('[data-fieldgroup-maxlength]'), function(k,v) {
            $(v).find('input, textarea').data('maxlength', $(v).data('fieldgroup-maxlength'));
        });
        // pass target label to each radio or checkbox fields
        $.each($('[data-fieldgroup-targetlabel]'), function(k,v) {
            $(v).find('input[type="checkbox"], input[type="radio"]').data('label', $(v).data('fieldgroup-targetlabel'));
        });
        // pass title data to each fields
        $.each($('[data-fieldgroup-title]'), function(k,v) {
            $(v).find('input, select, textarea').data('title', $(v).data('fieldgroup-title'));
        });

        // trigger validation on dependent fields
        $('[name$=".Mail_Address1"], [name$=".Current_Address1"]').on('keyup paste', function() {
            validateField($('[name$=".Mailing_Address_Same"]'), false, validateAddressEqual);
        });

        // validate each field by event and field type
        $('form').on('blur click', 'input[type="text"], select, textarea', function() {
            if($(this).is(':visible') && !validateField($(this))) {
                $(this).parent().find('.text-error').css({'display': 'inline-block', 'margin-bottom': '-2px'}); // style hack since IE is such a reliable browser ;-) // changed block to inline-block
            }
        });
        $('form').on('change', 'input[type="checkbox"], input[type="radio"]:not([name$=".Mailing_Address_Same"])', function() {
            validateField($(this));
        });

        // submit the form if no errors
        $('form').on('click', '#TaskSummary_ButtonSave', function(e) {
            e.preventDefault();
            let formIsValid = true;
            $.each($('form input:not(".datepicker_button"), form select, form textarea'), function(k,v) {
                if($(v).is(':visible') && !validateField($(v))) {
                    formIsValid = false;
                }
                if ( !validateField($('[name$=".Mailing_Address_Same"]'), false, validateAddressEqual) ) {
                    formIsValid = false;
                }
            });
            if (formIsValid) {
                doSave_Custom('refer-Complete');
            }
            else {
                $("html, body").animate({ scrollTop: 0 }, "slow");
            }
        });
        if (isProfileCompleted) {
            $('[data-add-section], [data-remove-section]').removeClass('bg-jade bg-ignite').addClass('disabled').prop('disabled', 'disabled');
            $('#EditProfile').find('input,select').prop('disabled', 'disabled');
        }
    });
</script>
