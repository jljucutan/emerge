<script>
$hm(document).ready(function() {
    $hm('#EditProfile_wrapper').hide();
    $hm('input, select').hide();
    window.setTimeout(function(){
       $hm('#EditProfile_wrapper').fadeIn(500);
       $hm('input, select').fadeIn(500);
    }, 1000);
});
</script>

<div id="task_summary_outer"> <!-- Start Outer Container -->
<div id="bg-image">.</div> <!-- BG Image Placeholder -->

<div id="EditProfile_container">
<div id="EditProfile_wrapper">

<div id="EditProfile">

<div id="EditProfile_Title">
<h2>Edit Expanded Profile</h2>
<h4>Let’s update your personal information</h4>
</div>

<div class="hr-sect">NATIONAL IDENTIFICATION</div>

<div class="input_wrapper">
<$client.env.inputNational_ID_IssuedBy>
<span class="floating-label"><$client.env.promptNational_ID_IssuedBy></span>
<div class="national-id-country">&nbsp;&nbsp;The issued by country is required.</div>
</div>

<div class="input_wrapper">
<$client.env.inputNational_ID_Type>
<span class="floating-label"><$client.env.promptNational_ID_Type></span>
<div class="national-id-type">&nbsp;&nbsp;The identification type is required.</div>
</div>

<div class="input_wrapper">
<$client.env.inputSSNO>
<span class="floating-label"><$client.env.promptSSNO></span>
<div class="national-id-value">&nbsp;&nbsp;The national id value is required.</div>
<div class="national-id-invalid">&nbsp;&nbsp;The national id format is invalid and only digits are allowed.</div>
</div>
<span class="note text-left">Enter ABCDE1234F if you don’t currently have a PAN number</span>

<div class="hr-sect">PERSONAL IDENTIFICATION</div>

<div style="display:none;"><$client.env.promptDOB><$client.env.inputDOB></div>

<div class="input_wrapper">
<input name="intlDate"  id="intlDate" value="" required="required" data-date-enabled="false" />
<input type="hidden" name="currentDOB"  id="currentDOB" value="<$client.tForWhomUserInfo.DOB>" />
<span class="floating-label" id="dob-label">Date of Birth (<span id="date-format"></span>)</span>
<div class="birth-date">&nbsp;&nbsp;The date of birth is required and must indicate an age of 16 or older.</div>
<div class="birth-date-invalid">&nbsp;&nbsp;The date of birth must indicate an age of 16 or older</div>
</div>

<div class="input_wrapper">
<$client.env.inputMaritalStatus>
<span class="floating-label"><$client.env.promptMaritalStatus></span>
<div class="marital-status">&nbsp;&nbsp;The marital status is required.</div>
</div>

<div class="input_wrapper">
<$client.env.inputNationality>
<span class="floating-label"><$client.env.promptNationality></span>
<div class="birth-country">&nbsp;&nbsp;Where were you born is required.</div>
</div>

<div class="input_wrapper">
<$client.env.inputEthnicity>
<span class="floating-label"><$client.env.promptEthnicity></span>
<div class="ethnicity">&nbsp;&nbsp;The ethnicity is required.</div>
</div>

<div class="input_wrapper">
<$client.env.inputGender>
<span class="floating-label"><$client.env.promptGender></span>
<div class="gender">&nbsp;&nbsp;The gender is required.</div>
</div>

<div class="hr-sect">PRIMARY EMERGENCY CONTACT INFORMATION</div>

<div class="input_wrapper">
<$client.env.inputEC_First_Name>
<span class="floating-label"><$client.env.promptEC_First_Name></span>
<div class="ec-first-name">&nbsp;&nbsp;The emergency contact first name is required.</div>
</div>

<div class="input_wrapper">
<$client.env.inputEC_Last_Name>
<span class="floating-label"><$client.env.promptEC_Last_Name></span>
<div class="ec-last-name">&nbsp;&nbsp;The emergency contact last name is required.</div>
</div>

<div class="input_wrapper">
<$client.env.inputEC_Relationship>
<span class="floating-label"><$client.env.promptEC_Relationship></span>
<div class="ec-relationship">&nbsp;&nbsp;The relationship is required.</div>
</div>

<div class="input_wrapper">
<$client.env.inputEC_Address_Line1>
<span class="floating-label"><$client.env.promptEC_Address_Line1></span>
<div class="ec-address1">&nbsp;&nbsp;The address is required.</div>
</div>

<div class="input_wrapper">
<$client.env.inputEC_Address_Line2>
<span class="floating-label"><$client.env.promptEC_Address_Line2></span>
</div>

<div class="input_wrapper">
<$client.env.inputEC_Country>
<div class="ec-country">&nbsp;&nbsp;The country is required.</div>
<span class="floating-label"><$client.env.promptEC_Country></span>
</div>

<div class="input_wrapper">
<$client.env.inputEC_City>
<span class="floating-label"><$client.env.promptEC_City></span>
<div class="ec-city">&nbsp;&nbsp;The city is required.</div>
</div>

<div class="input_wrapper">
<$client.env.inputEC_State>
<span class="floating-label"><$client.env.promptEC_State></span>
<div class="ec-state">&nbsp;&nbsp;The state is required.</div>
</div>

<div class="input_wrapper">
<$client.env.inputEC_Zip>
<span class="floating-label"><$client.env.promptEC_Zip></span>
<div class="ec-zip">&nbsp;&nbsp;The postal code is required.</div>
</div>

<div class="hr-sect"><!--EC Primary Phone--> </div>

<div class="input_wrapper">
<$client.env.inputEC_Primary_Country_Code>
<span class="floating-label"><$client.env.promptEC_Primary_Country_Code></span>
<div class="ec-phone-code">&nbsp;&nbsp;The country code is required.</div>
</div>

<div class="merge">
<div class="input_wrapper">
<$client.env.inputEC_Primary_Phone_Number_Type>
<span class="floating-label">Phone type</span>
<div class="EC-Primary-Phone-Type">&nbsp;&nbsp;The phone type is required.</div>
</div>
<div class="input_wrapper">
<$client.env.inputEC_Primary_Phone_Number>
<span class="floating-label"><$client.env.promptEC_Primary_Phone_Number></span>
<div class="ec-phone">&nbsp;&nbsp;The phone number is required and only 7-13 digits are allowed.</div>
</div>
</div>

<div class="hr-sect"><!--EC Mobile Phone--> </div>

<div class="input_wrapper">
<$client.env.inputEC_Mobile_Country_Code>
<span class="floating-label"><$client.env.promptEC_Mobile_Country_Code></span>
</div>

<div class="merge">
<div class="input_wrapper">
<$client.env.inputEC_Secondary_phone_type>
<span class="floating-label">Phone type</span>
<div class="EC-Secondary-Phone-Type">&nbsp;&nbsp;The phone type is required.</div>
</div>
<div class="input_wrapper">
<$client.env.inputEC_Mobile_Phone_Number>
<span class="floating-label"><$client.env.promptEC_Mobile_Phone_Number></span>
<div class="ec-phone2">&nbsp;&nbsp;Only 7-13 digits are allowed in the phone number.</div>
</div>
</div>

<div class="button_group">
<div id="save"></div>
<div id="saveandcomplete"></div>
<div id="cancel"></div>
</div>

</div>
</div>
</div>

</div> <!-- End Outer Container -->

<div style="display:none;"> <!-- field labels needed for error message--> 
    <span id='National_ID_IssuedBy_prompt'><$client.env.promptNational_ID_IssuedBy></span> 
    <span id='National_ID_Type_prompt'><$client.env.promptNational_ID_Type></span> 
    <span id='SSNO_prompt'><$client.env.promptSSNO></span> 
    <span id='DOB_prompt'><$client.env.promptDOB></span> 
    <span id='MaritalStatus_prompt'><$client.env.promptMaritalStatus></span> 
    <span id='Nationality_prompt'><$client.env.promptNationality></span> 
    <span id='Ethnicity_prompt'><$client.env.promptEthnicity></span> 
    <span id='Gender_prompt'><$client.env.promptGender></span> 
    <span id='EC_First_Name_prompt'><$client.env.promptEC_First_Name></span> 
    <span id='EC_Last_Name_prompt'><$client.env.promptEC_Last_Name></span> 
    <span id='EC_Relationship_prompt'><$client.env.promptEC_Relationship></span> 
    <span id='EC_Address_Line1_prompt'><$client.env.promptEC_Address_Line1></span> 
    <span id='EC_Address_Line2_prompt'><$client.env.promptEC_Address_Line2></span> 
    <span id='EC_Country_prompt'><$client.env.promptEC_Country></span> 
    <span id='EC_City_prompt'><$client.env.promptEC_City></span> 
    <span id='EC_State_prompt'><$client.env.promptEC_State></span> 
    <span id='EC_Zip_prompt'><$client.env.promptEC_Zip></span> 
    <span id='EC_Primary_Country_Code_prompt'><$client.env.promptEC_Primary_Country_Code></span>
    <span id='EC_Primary_Area_Code_prompt'><$client.env.promptEC_Primary_Area_Code></span>
    <span id='EC_Primary_Primary_Number_prompt'><$client.env.promptEC_Primary_Phone_Number></span>

    <span id='EC_Primary_Phone_Number_Type_prompt'><$client.env.promptEC_Primary_Phone_Number_Type></span>
    <span id='EC_Secondary_phone_type_prompt'><$client.env.promptEC_Secondary_phone_type></span>

    <span id='EC_Mobile_Country_Code_prompt'><$client.env.promptEC_Mobile_Country_Code></span>
    <span id='EC_Mobile_Area_Code_prompt'><$client.env.promptEC_Mobile_Area_Code></span>
    <span id='EC_Mobile_Phone_Number_prompt'><$client.env.promptEC_Mobile_Phone_Number></span>

    <span id='EC_Work_Country_Code_prompt'><$client.env.promptEC_Work_Country_Code></span>
    <span id='EC_Work_Area_Code_prompt'><$client.env.promptEC_Work_Area_Code></span>
    <span id='EC_Work_Phone_Number_prompt'><$client.env.promptEC_Work_Phone_Number></span>

    <span id='EC_Other_Country_Code_prompt'><$client.env.promptEC_Other_Country_Code></span>
    <span id='EC_Other_Area_Code_prompt'><$client.env.promptEC_Other_Area_Code></span>
    <span id='EC_Other_Phone_Number_prompt'><$client.env.promptEC_Other_Phone_Number></span>
</div>

<input type="hidden" id="Site_Name" name="Site_Name" value="<$client.env.index.site_name>" />
<input type="hidden" id="Emp_Country" name="Emp_Country" value="<$client.tForWhomUserInfo.Country>" />
<input type="hidden" id="Evt_Location_Code" name="Evt_Location_Code" value="<$client.tEventCategories_Category_11.Code>" />
<input type="hidden" id="Evt_Location" name="Evt_Location" value="<$client.tEventCategories_Category_11.Value>" />

<script type="text/javascript" src="<$link;/main/SiteGen/DynamicContent/Snippets/Paypal_EditProfile/js>/country.js"></script>
<script type="text/javascript" src="<$link;/main/SiteGen/DynamicContent/Snippets/Paypal_EditProfile/js>/custom-paypal.js"></script>
<script type="text/javascript" src="<$link;/main/SiteGen/DynamicContent/Snippets/Paypal_EditProfile/js>/setFieldsAfterOffer.js"></script>

<script type="text/javascript" src="<$link;/main/SiteGen/DynamicContent/Snippets/Paypal_EditProfile/js>/DateFormat.js"></script>

<script>
setDefaultDOB();
</script>
<script type="text/javascript" src="<$link;/main/RedCarpet/FormTemplates/FormSupport/js/date_formatter.js>"></script>
<script>
$hm(document).ready(function() {
$hm('#ECHomeAreaCode').attr("placeholder", "");
$hm('#ECHomePhone').attr("placeholder", "");
$hm('#ECMobileAreaCode').attr("placeholder", "");
$hm('#ECMobilePhone').attr("placeholder", "");
});
</script>

<script>
// Highlights fields red on validation error - Start
function EnableClientSideValidation() {
     var error_counter = 0;

     if ($("#NationalID_Country").val().trim().length == 0) {
          $("#NationalID_Country").addClass("input-error");
          $(".national-id-country").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#NationalID_Country").removeClass("input-error");
          $(".national-id-country").removeClass("error-message");
     }

     if ($("#NationalID_Type").val().trim().length == 0) {
          $("#NationalID_Type").addClass("input-error");
          $(".national-id-type").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#NationalID_Type").removeClass("input-error");
          $(".national-id-type").removeClass("error-message");
     }
     
     if ($("#NationalID_Value").val().trim().length == 0) {
          $("#NationalID_Value").addClass("input-error");
          $(".national-id-value").addClass("error-message");
          error_counter ++;
     }
     else if ($("#NationalID_Value").val().trim().length > 0 && checkNatIdFormat($("#NationalID_Value").val())==false) {
          $("#NationalID_Value").addClass("input-error");
          $(".national-id-invalid").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#NationalID_Value").removeClass("input-error");
          $(".national-id-value").removeClass("error-message");
          $(".national-id-invalid").removeClass("error-message");
     }

     $("#intlDate").each(function(){
          var el_val = $(this).datepicker('getDate');
          if (!el_val || (el_val && moment().diff(el_val, 'years') < 16)) {
               $(this).addClass('input-error');
               $(".birth-date").addClass("error-message");
               error_counter ++;
          }
          else {
               $(this).removeClass('input-error');
               $(".birth-date").removeClass("error-message");
          }
     });

     if ($("#Emp_MaritalStatus").val().trim().length == 0) {
          $("#Emp_MaritalStatus").addClass("input-error");
          $(".marital-status").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#Emp_MaritalStatus").removeClass("input-error");
          $(".marital-status").removeClass("error-message");
     }

     if ($("#Emp_Nationality").val().trim().length == 0) {
          $("#Emp_Nationality").addClass("input-error");
          $(".birth-country").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#Emp_Nationality").removeClass("input-error");
          $(".birth-country").removeClass("error-message");
     }

     if ($("#Emp_Ethnicity").val().trim().length == 0) {
          $("#Emp_Ethnicity").addClass("input-error");
          $(".ethnicity").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#Emp_Ethnicity").removeClass("input-error");
          $(".ethnicity").removeClass("error-message");
     }
     
     if ($("#Emp_Gender").val().trim().length == 0) {
          $("#Emp_Gender").addClass("input-error");
          $(".gender").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#Emp_Gender").removeClass("input-error");
          $(".gender").removeClass("error-message");
     }   

     if ($("#EC_First_Name").val().trim().length == 0) {
          $("#EC_First_Name").addClass("input-error");
          $(".ec-first-name").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#EC_First_Name").removeClass("input-error");
          $(".ec-first-name").removeClass("error-message");
     }
     
     if ($("#EC_Last_Name").val().trim().length == 0) {
          $("#EC_Last_Name").addClass("input-error");
          $(".ec-last-name").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#EC_Last_Name").removeClass("input-error");
          $(".ec-last-name").removeClass("error-message");
     }
     
     if ($("#EC_Relationship").val().trim().length == 0) {
          $("#EC_Relationship").addClass("input-error");
          $(".ec-relationship").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#EC_Relationship").removeClass("input-error");
          $(".ec-relationship").removeClass("error-message");
     }  

     if ($("#EC_Address1").val().trim().length == 0) {
          $("#EC_Address1").addClass("input-error");
          $(".ec-address1").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#EC_Address1").removeClass("input-error");
          $(".ec-address1").removeClass("error-message");
     }
     
     if ($("#EC_City").val().trim().length == 0) {
          $("#EC_City").addClass("input-error");
          $(".ec-city").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#EC_City").removeClass("input-error");
          $(".ec-city").removeClass("error-message");
     }

     if ($("#EC_State").val().trim().length == 0) {
          $("#EC_State").addClass("input-error");
          $(".ec-state").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#EC_State").removeClass("input-error");
          $(".ec-state").removeClass("error-message");
     }

     if ($("#EC_Zip").is(':visible') && $("#EC_Zip").val().trim().length == 0) {
          $("#EC_Zip").addClass("input-error");
          $(".ec-zip").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#EC_Zip").removeClass("input-error");
          $(".ec-zip").removeClass("error-message");
     }

     if ($("#EC_Country").val().trim().length == 0) {
          $("#EC_Country").addClass("input-error");
          $(".ec-country").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#EC_Country").removeClass("input-error");
          $(".ec-country").removeClass("error-message");
     }

    if ($("#ECHomePhoneCode").val().trim().length == 0) {
          $("#ECHomePhoneCode").addClass("input-error");
          $(".ec-phone-code").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#ECHomePhoneCode").removeClass("input-error");
          $(".ec-phone-code").removeClass("error-message");
     }
     
     if ($("#EC-Primary-Phone-Type").val().trim().length == 0) {
          $("#EC-Primary-Phone-Type").addClass("input-error");
          $(".EC-Primary-Phone-Type").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#EC-Primary-Phone-Type").removeClass("input-error");
          $(".EC-Primary-Phone-Type").removeClass("error-message");
     }

     if ($("#ECHomePhone").val().trim().length == 0) {
          $("#ECHomePhone").addClass("input-error");
          $(".ec-phone").addClass("error-message");
          error_counter ++;
     }
     else {
          var pattern = new RegExp('^[0-9]{7,13}$');
          if (pattern.test($("#ECHomePhone").val()) == false) {
               $("#ECHomePhone").addClass("input-error");
               $(".ec-phone").addClass("error-message");
               error_counter ++;
          }
          else {
               $("#ECHomePhone").removeClass("input-error");
               $(".ec-phone").removeClass("error-message");
          }
     }

     if ($("#EC-Secondary-Phone-Type").val().trim().length == 0 && $("#ECMobilePhone").val().trim().length > 0) {
          $("#EC-Secondary-Phone-Type").addClass("input-error");
          $(".EC-Secondary-Phone-Type").addClass("error-message");
          error_counter ++;
     }
     else {
          $("#EC-Secondary-Phone-Type").removeClass("input-error");
          $(".EC-Secondary-Phone-Type").removeClass("error-message");
     }
  
     if ($("#ECMobilePhone").val().trim().length == 0 && $("#EC-Secondary-Phone-Type").val().trim().length > 0 ) {
          $("#ECMobilePhone").addClass("input-error");
          $(".ec-phone2").addClass("error-message");
          error_counter ++;
     }
     else {
          var pattern = new RegExp('^[0-9]{7,13}$');
          if (pattern.test($("#ECMobilePhone").val()) == false && $("#ECMobilePhone").val().trim().length > 0) {
               $("#ECMobilePhone").addClass("input-error");
               $(".ec-phone2").addClass("error-message");
               error_counter ++;
          }
          else {
               $("#ECMobilePhone").removeClass("input-error");
               $(".ec-phone2").removeClass("error-message");
          }
     }

     if (error_counter > 0) {
          $("html, body").animate({ scrollTop: 0 }, "slow");
          return false;
     }
     else {
          EnableValidation();
          doSave_Custom('refer-Complete');
          return true;
     }
}

$(window).load(function() {
     var isProfileCompleted = sTaskComplete;

     $('#TaskSummary_ButtonCancel').appendTo('#cancel').show();
     if (!isProfileCompleted) {
          $('#TaskSummary_ButtonSave').appendTo('#saveandcomplete').prop('onclick', null).show().text('Continue');
          $('#EUPDefaultSaveButton').appendTo('#save').show();
     }

     window.alert = function() {};

     $("form").on("click", "#TaskSummary_ButtonSave", function(e) {
          e.preventDefault();
          EnableClientSideValidation();
     });
});

$(document).ready(function() {

     // SERVICES-36558 | jjucutan | dynamic date implementation
     <$include;/main/RedCarpet/FormTemplates/FormSupport/js/global_date_config.js>
     $("#intlDate")
        .formatDatePicker(dateConfig, "<$client.env.eval(client.tEventCategories_Category_11.Code.subString(0,2))>")
        .datepicker('setDate', $('[name$="DOB_display"]').datepicker('getDate'))
        .datepicker('option', 'onSelect', function(dateText, instance) {
          $('[name$="DOB_display"]').datepicker('setDate', $(this).datepicker('getDate'));
          $(this).trigger('change');
        });

      $('#date-format').text(dateConfig.regions[dateConfig.countries["<$client.env.eval(client.tEventCategories_Category_11.Code.subString(0,2))>"]].replace('yy', 'yyyy'));

     $("#NationalID_Country").blur(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".national-id-country").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".national-id-country").addClass("error-message"); } });
      // set format date outside global config
      if (["CHN","JPN"].indexOf($('#Evt_Location_Code').val().substring(0,3)) > -1) {
        $("#intlDate").datepicker("option", "dateFormat", "yy/mm/dd");
        $('#date-format').text("yyyy/mm/dd");
      }

     $("#NationalID_Country").change(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".national-id-country").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".national-id-country").addClass("error-message"); } });

     $("#NationalID_Type").blur(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".national-id-type").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".national-id-type").addClass("error-message"); } });
     $("#NationalID_Type").change(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".national-id-type").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".national-id-type").addClass("error-message"); } });

     $("#NationalID_Value").blur(function() { 
          if ($(this).val().trim().length > 0 && checkNatIdFormat($(this).val()) == true) { 
               $(this).removeClass("input-error"); 
               $(".national-id-value").removeClass("error-message");
               $(".national-id-invalid").removeClass("error-message"); 
          } 
          else if ($(this).val().trim().length > 0 && checkNatIdFormat($(this).val()) == false) { 
               $(this).addClass("input-error"); 
               $(".national-id-value").removeClass("error-message");
               $(".national-id-invalid").addClass("error-message"); 
          } 
          else { 
               $(this).addClass("input-error"); 
               $(".national-id-value").addClass("error-message"); 
               $(".national-id-invalid").removeClass("error-message"); 
          } 
     });

     $("#Emp_MaritalStatus").blur(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".marital-status").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".marital-status").addClass("error-message"); } });
     $("#Emp_MaritalStatus").change(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".marital-status").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".marital-status").addClass("error-message"); } });

     $("#Emp_Ethnicity").blur(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".ethnicity").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".ethnicity").addClass("error-message"); } });
     $("#Emp_Ethnicity").change(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".ethnicity").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".ethnicity").addClass("error-message"); } });
     
     $("#Emp_Nationality").blur(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".birth-country").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".birth-country").addClass("error-message"); } });
     $("#Emp_Nationality").change(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".birth-country").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".birth-country").addClass("error-message"); } });

     $("#Emp_Gender").blur(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".gender").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".gender").addClass("error-message"); } });
     $("#Emp_Gender").change(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".gender").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".gender").addClass("error-message"); } });

     $(".eupDate").each(function() {
          $(this).change(function() {
               if (!$(this).datepicker('getDate') || ($(this).val().length && moment().diff($(this).datepicker('getDate'), 'years') < 16)) {
                    $(this).addClass('input-error');
                    $(".birth-date-invalid").addClass("error-message");
               }
               else {
                    $(this).removeClass('input-error');
                    $(".birth-date-invalid").removeClass("error-message");
               }
          });
     });

     $("#intlDate").each(function() {
          $(this).change(function() {
               var el_val = $(this).datepicker('getDate');
               if (!el_val) { 
                    $(this).addClass('input-error'); $(".birth-date").addClass("error-message");
                    //need to change floating label on date fields
                    $("#dob-label").removeClass("date-label-focus");
               } 
               else { 
                    $(this).removeClass('input-error'); $(".birth-date").removeClass("error-message");
                    //need to change floating label on date fields
                    $("#dob-label").addClass("date-label-focus");
               } 
          });
     });

     $("#intlDate").on('change blur', function() { 
        if (!$(this).datepicker('getDate') || ($(this).val().length && moment().diff($(this).datepicker('getDate'), 'years') < 16)) {
          $(this).addClass("input-error"); $(".birth-date").addClass("error-message"); 
        } 
        else { 
          $(this).removeClass("input-error"); $(".birth-date").removeClass("error-message"); 
        } 
      });
 
     $("#EC_First_Name").blur(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".ec-first-name").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".ec-first-name").addClass("error-message"); } });

     $("#EC_Last_Name").blur(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".ec-last-name").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".ec-last-name").addClass("error-message"); } });

     $("#EC_Relationship").blur(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".ec-relationship").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".ec-relationship").addClass("error-message"); } });
     $("#EC_Relationship").change(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".ec-relationship").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".ec-relationship").addClass("error-message"); } });

     $("#EC_Address1").blur(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".ec-address1").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".ec-address1").addClass("error-message"); } });
     
     $("#EC_City").blur(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".ec-city").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".ec-city").addClass("error-message"); } });
    
     $("#EC_Country").on('blur change', function() { 
      if ($(this).val().trim().length > 0) { 
        $(this).removeClass("input-error"); 
        $(".ec-country").removeClass("error-message"); 
      } 
      else { 
        $(this).addClass("input-error"); 
        $(".ec-country").addClass("error-message"); 
      } 
      $('#EC_Zip').parent().show();
      if ($(this).val() === "HKG") {
        $('#EC_Zip').parent().hide();
      }
      $('#ECHomePhoneCode').trigger('change');
    });
    $("#EC_Country").trigger('blur');
     
     $("#EC_State").blur(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".ec-state").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".ec-state").addClass("error-message"); } });
     $("#EC_State").change(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".ec-state").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".ec-state").addClass("error-message"); } });

     $("#EC_Zip:visible").blur(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".ec-zip").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".ec-zip").addClass("error-message"); } });

     $("#ECHomePhoneCode").blur(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".ec-phone-code").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".ec-phone-code").addClass("error-message"); } });
     $("#ECHomePhoneCode").change(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".ec-phone-code").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".ec-phone-code").addClass("error-message"); } });

     $("#EC-Primary-Phone-Type").blur(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".EC-Primary-Phone-Type").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".EC-Primary-Phone-Type").addClass("error-message"); } });
     $("#EC-Primary-Phone-Type").change(function() { if ($(this).val().trim().length > 0) { $(this).removeClass("input-error"); $(".EC-Primary-Phone-Type").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".EC-Primary-Phone-Type").addClass("error-message"); } });

     $("#ECHomePhone").blur(function() { var pattern = new RegExp('^[0-9]{7,13}$'); if ($(this).val().trim().length > 0 && pattern.test($(this).val())) { $(this).removeClass("input-error"); $(".ec-phone").removeClass("error-message"); } else { $(this).addClass("input-error"); $(".ec-phone").addClass("error-message"); } });

     $("#EC-Secondary-Phone-Type").blur(function() { 
          if ($(this).val().trim().length > 0) { 
               $(this).removeClass("input-error"); 
               $(".EC-Secondary-Phone-Type").removeClass("error-message"); 
          } 
          else if ($("#ECMobilePhone").val().trim().length > 0) { 
               $(this).addClass("input-error"); 
               $(".EC-Secondary-Phone-Type").addClass("error-message"); 
          } 
          else { 
               $(this).removeClass("input-error"); 
               $(".EC-Secondary-Phone-Type").removeClass("error-message"); 
               $("#ECMobilePhone").removeClass("input-error");
               $(".ec-phone2").removeClass("error-message"); 
          } 
     });

     $("#EC-Secondary-Phone-Type").change(function() { 
          if ($(this).val().trim().length > 0) { 
               $(this).removeClass("input-error"); 
               $(".EC-Secondary-Phone-Type").removeClass("error-message"); 
          } 
          else if ($("#ECMobilePhone").val().trim().length > 0) { 
               $(this).addClass("input-error"); 
               $(".EC-Secondary-Phone-Type").addClass("error-message"); 
          } 
          else { 
               $(this).removeClass("input-error"); 
               $(".EC-Secondary-Phone-Type").removeClass("error-message"); 
               $("#ECMobilePhone").removeClass("input-error");
               $(".ec-phone2").removeClass("error-message"); 
          } 
     });

     $("#ECMobilePhone").blur(function() { 
          var pattern = new RegExp('^[0-9]{7,13}$'); 
          if ($(this).val().trim().length > 0 && pattern.test($(this).val())) { 
               $(this).removeClass("input-error"); 
               $(".ec-phone2").removeClass("error-message"); 
          } 
          else if ($(this).val().trim().length > 0) { 
               $(this).addClass("input-error"); 
               $(".ec-phone2").addClass("error-message"); 
          } 
          else if ($("#EC-Secondary-Phone-Type").val().trim().length > 0) { 
               $(this).addClass("input-error"); 
               $(".ec-phone2").addClass("error-message"); 
          } 
          else { 
               $(this).removeClass("input-error"); 
               $(".ec-phone2").removeClass("error-message"); 
               $("#EC-Secondary-Phone-Type").removeClass("input-error");
               $(".EC-Secondary-Phone-Type").removeClass("error-message"); 
          } 
     });  
});
// Highlights fields red on validation error - End

$(document).on('ready', function() {
     var keepIndPan = function(el) {
          if (el.val() === "IND") {
               $('#NationalID_Type option:not([value="IND-PAN"])').remove();
          }
     }
     var renderIndiaHelp = function(el, country) {
          if (country === "IND" && "<$client.env.eval(client.tEventCategories_Category_11.Code.subString(0,2))>" === "IND") {
               el.show();
          }
          else {
               el.hide();
          }
     }
     keepIndPan($('#NationalID_Country'));
     renderIndiaHelp($('.note'), $('#NationalID_Country').val());
     $('#NationalID_Country').on('change', function() {
          keepIndPan($(this));
          renderIndiaHelp($('.note'), $('#NationalID_Country').val());
     });

});
</script>

<style>
.error-message {
     display: block !important;
     width: 100%;
     font-size: 12px;
}
/* Highlights fields red on validation error and shows error message - End */

@media screen and (-webkit-min-device-pixel-ratio:0) {  
/* CSS Statements that only apply on webkit-based browsers (Chrome, Safari, etc.) */  
     select {
          -webkit-appearance: none !important;
          -moz-appearance: none;
          -webkit-border-radius: 0px;
          background-image: url("<$link;/main/sitegen/Onboarding/content/Uploads/Images/skin/drop-down-arrow.png>");
          /* Icon made by http://creativecommons.org/licenses/by/3.0/ from www.flaticon.com */
          background-position: 98% 50%;
          background-repeat: no-repeat;
          background-size: 8px;
     }
}
</style>

<style>
#NationalID_Country, #NationalID_Type, #Emp_MaritalStatus, #Emp_Ethnicity, #Emp_Gender, #Emp_Nationality, #EC_Relationship, #EC_Country, #EC_State, #ECHomePhoneCode, #ECMobilePhoneCode{
        color: #888888;
}

#NationalID_Country > option:nth-child(n+2), #NationalID_Type > option:nth-child(n+2), #Emp_MaritalStatus > option:nth-child(n+2), #Emp_Ethnicity > option:nth-child(n+2), #Emp_Gender > option:nth-child(n+2), #Emp_Nationality > option:nth-child(n+2), #EC_Relationship > option:nth-child(n+2), #EC_Country > option:nth-child(n+2), #EC_State > option:nth-child(n+2), #ECHomePhoneCode > option:nth-child(n+2), #ECMobilePhoneCode > option:nth-child(n+2) {
        color: #444;
}

#EC_State:enabled, #ECHomePhoneCode:enabled, #ECMobilePhoneCode:enabled {
    color: #444;
}

.lifesuite__button.primary:hover, .lifesuite__ag-grid .ag-paging-button:hover {
    background-color: unset;
    -webkit-animation-name: unset;
            animation-name: unset;
    -webkit-animation-duration: unset;
            animation-duration: unset;
}

.cal_and_button {
    width: 100%;
    margin-bottom: -3px;
}

.cal_and_button > tbody > tr > td {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-pack: ;
        -ms-flex-pack: ;
            justify-content: ;
}

.cal_and_button > tbody > tr > td > input:nth-child(1) {
    width: 70%;
    margin-right: 10px;
    margin-left: -3px;
}

.cal_and_button > tbody > tr > td > input:nth-child(3) {
    width: 40%;
    margin-right: -3px;
margin-bottom: 0px !important;
}
</style>
<script>
var isInternetExploder = function() {

    var ua = window.navigator.userAgent;
    var msie = ua.indexOf("MSIE ");

    if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./))  // If Internet Exploder, return version number
    {
        return true;
    }
    return false;
}
if (isInternetExploder()) {
  var notes = document.getElementsByClassName('note');
  for (i = 0; i < notes.length; i++) {
    notes[i].style.marginBottom = "2em";
  }
  var sectionHeaders = document.getElementsByClassName('hr-sect');
  for (j = 0; j < sectionHeaders.length; j++) {
    sectionHeaders[j].style.marginBottom = "1.25em";
  }
  var selects = document.getElementsByTagName('select');
  for (k = 0; k < selects.length; k++) {
    selects[k].style.display= "block";
  }
  var inputs = document.getElementsByTagName('input');
  for (l = 0; l < inputs.length; l++) {
    inputs[l].style.display= "block";
  }
}
</script>
