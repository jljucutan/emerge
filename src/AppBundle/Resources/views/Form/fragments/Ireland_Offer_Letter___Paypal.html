<!-- Modal E-Signature box: Note there is a DIV below that is also needed to implement --> 
<div class="modal" id="modal" style="display:none;">
    <div class="modal-content">
        <p class="lifesuite__h2" style="margin-left: 0;"><strong>Electronic Signature</strong></p>
        <p><$client.env.eval(client.env.param.verbiage.length()==0? 'I understand that by electronically signing this document by typing my full name below, that I acknowledge, agree and attest that the information provided by me is true and correct and I am freely intending to create and adopt as my own a legally binding electronic signature that carries the same legal effect and enforceability as my handwritten signature.':client.env.param.verbiage)></p>
        <div class="row">
            <div class="col-lg-12">
                <b>Type your Name:</b> <input type=text id="eSignature1" class="lifesuite__text-input ng-invalid" style="width: 99%">&nbsp; 
                <div class="lifesuite__clearfix lifesuite__float-right" style="margin-right:-15px; width: 278px;"> 
                    <input type="button" class="lifesuite__button primary" value="Sign" onClick="validateSignature('signature','eSignature1','full_name','modal','over','sv','date');xbObj('eSignature1').value='';document.getElementById('eSignature1').focus();">&nbsp; 
                    <input type="button" class="lifesuite__button" value="Clear" onClick="xbObj('signature').value='';showHide('modal');showHide('over');xbObj('eSignature1').value='';if (typeof targetdatecheckCLEAR == 'function' ){targetdatecheckCLEAR('signature','date');}">&nbsp; 
                    <input type="button" class="lifesuite__button" value="Cancel" onClick="showHide('modal');showHide('over');xbObj('eSignature1').value='';"> 
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="modal2" style="display:none;">
    <div class="modal-content">
        <p class="lifesuite__h2" style="margin-left: 0;"><strong>Electronic Signature</strong></p>
        <p><$client.env.eval(client.env.param.verbiage.length()==0? 'I understand that by electronically signing this document by typing my full name below, that I acknowledge, agree and attest that the information provided by me is true and correct and I am freely intending to create and adopt as my own a legally binding electronic signature that carries the same legal effect and enforceability as my handwritten signature.':client.env.param.verbiage)></p>
        <div class="row">
            <div class="col-lg-12"> 
                <strong>Type your Name:</strong> <input type=text id="eSignature2" class="lifesuite__text-input ng-invalid" style="width: 99%">&nbsp; 
                <div class="lifesuite__clearfix lifesuite__float-right" style="margin-right:-15px; width: 278px;"> 
                    <input type="button" class="lifesuite__button primary" value="Sign" onClick="validateSignature('signature2','eSignature2','SignerMan','modal2','over','sv2','date2');xbObj('eSignature2').value='';document.getElementById('eSignature2').focus();">&nbsp; 
                    <input id="clear-sig-2" type="button" class="lifesuite__button" value="Clear" onClick="xbObj('signature2').value='';showHide('modal2');showHide('over');xbObj('eSignature2').value='';if (typeof targetdatecheckCLEAR == 'function' ){targetdatecheckCLEAR('signature2','date2');}">&nbsp; 
                    <input type="button" class="lifesuite__button" value="Cancel" onClick="showHide('modal2');showHide('over');xbObj('eSignature2').value='';"> 
                </div>
            </div>
        </div>
    </div>
</div>

<div id="over" style="display:none;"></div>
<!-- RESPONSIVE eFORM PAGE LOADER-->
<div class="modal" style="display:block; background: #002E6D;">
  <div class="fb-spinner">
    <i class="fa fa-2x fa-spinner fa-pulse"></i>
  </div>
</div>
<!--//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
<form id="italy-offer-letter" name="frmForm" action="<$link;config.path.RCFolder_FormTemplates>/<$name;<$client.current.parent>>/doSave?<$client.env.QUERY_STRING>" method="post" onsubmit="return SubmitCallback(this);" role="form">
    <div hidden>
        <$client.env.FormField.Form_Name.prompt>
        <$client.env.FormField.Form_Name.HTML>
        <$client.env.FormField.Form_Type.prompt>
        <$client.env.FormField.Form_Type.HTML>
        <$client.env.FormField.Form_Owner.prompt>
        <$client.env.FormField.Form_Owner.HTML>
        <$client.env.FormField.Form_CreateDate.prompt>
        <$client.env.FormField.Form_CreateDate.HTML>
        <$client.env.FormField.Form_Completed.prompt>
        <$client.env.FormField.Form_Completed.HTML>
        <$client.env.FormField.Form_Delivered.prompt>
        <$client.env.FormField.Form_Delivered.HTML>
        <$client.env.FormField.Form_TaskId.prompt>
        <$client.env.FormField.Form_TaskId.HTML>
        <$client.env.FormField.display_version.HTML>
        <!-- Replace With eForm Specific Data Field Prompts From Formalizer-->
    </div>
    <input type="hidden" name="tagparamlist" value="<$client.env.tagparamlist>">
<main class="container-fluid">
    <div class="row">
        <div class="col-lg-12">
            <div class="img-wrapper">
                <img src="<$link;/RedCarpet/Onboarding/Uploads/Images/paypal_logo.jpg>" alt="PayPal Logo" class="img-responsive">
            </div>
        </div>
    </div>
    <template id="fragment-1">
        <p>&nbsp;</p>
        <p class="text-right">
            PayPal Europe Services Ltd <br>
            Ballycoolin Business Park <br>
            Dublin15 <br>
            Ireland
        </p>
        <p class="mb-5">
            <mark><$client.tForWhomUserInfo.First_Name> <$client.tForWhomUserInfo.Middle_Name><$client.env.eval(client.tForWhomUserInfo.Middle_Name.length()>0?' ':'')><$client.tForWhomUserInfo.Last_Name></mark><br>
            <mark><$client.tForWhomUserInfo.Address1></mark><br>
            <% if ('<$client.tForWhomUserInfo.Address2>'.length > 0) { %>
            <mark><$client.tForWhomUserInfo.Address2></mark><br>
            <% } %>
            <mark><$client.tForWhomUserInfo.State></mark>&nbsp;<mark><$client.tForWhomUserInfo.Zip></mark>
        </p>
        <p class="hide"></p>
        <p class="mb-5">
            <mark><%= Current_Date %></mark>
        </p>
        <p class="hide">&nbsp;</p>
        <p class="text-justify">Dear <mark><$client.env.eval(client.tForWhomUserInfo.Preferred_First_Name.length()>0?client.tForWhomUserInfo.Preferred_First_Name:client.tForWhomUserInfo.First_Name)></mark>,</p>
        <p class="text-justify">Further to your <% if ('<$client.tEventCategories_Category_13.Code>'.indexOf('I')==0) { %>application for a full-time <mark><$client.tForWhomUserInfo.InternshipLength></mark>&nbsp;<mark><$client.tForWhomUserInfo.internshipTerm></mark> fixed term internship and your<% } %><% if ('<$client.tEventCategories_Category_13.Code>'.indexOf('T')==0) { %>application for a full-time fixed term position and your<% } %> recent meetings and discussions, I am delighted to offer you the position of <mark><$client.tForWhomUserInfo.Business_Title></mark> reporting to <mark><$client.tForWhomUserInfo.MngrBsnssTitle></mark> with <mark><$client.tForWhomUserInfo.EnityName_Description></mark> (the "Company"). We would like you to commence employment with us on <mark><%= moment('<$client.tEventDates_Date_2.Value>').format('DD MMMM YYYY') %></mark> Your period of continuous employment for statutory purposes began on.</p>
        <p class="text-justify">Your gross annual base salary will be <mark><$client.tForWhomUserInfo.Salary_Amount></mark>&nbsp;<mark><$client.tForWhomUserInfo.SALARY_CURRENCY></mark><% if (['T','I'].indexOf('<$client.env.eval(client.tEventCategories_Category_13.Code.substring(0))>') >= 0) { %> prorated, <% } %> paid four weekly, two weeks in arrears directly into your bank account.</p>
        <% if ('<$client.tForWhomUserInfo.Relocation>' == 'Y') { %>
        <div class="marked">
            <div id="<%= makeid(); %>" data-toggle="popover" data-placement="top" data-content="Relocation needed = Yes"></div>
            <p class="text-justify"><strong>From</strong> City, State either from the Application or Manual entry <strong>to</strong> City State use <mark><$client.tForWhomUserInfo.PayAreaCity></mark> field</p>
            <p class="text-justify">To help you relocate from <mark><$client.tForWhomUserInfo.RelocationFrom></mark> to <mark><$client.tForWhomUserInfo.PayAreaCity></mark>, you will be entitled to benefits as outlined in your Relocation Agreement.</p>
            <p class="text-justify">Upon acceptance of this offer letter our relocation partner AIRES will contact you directly to initiate this process.</p>
        </div>
        <% } %>
        <% if ('<$client.tForWhomUserInfo.Relo_Bonus>' == 'Yes') { %>
        <div class="marked">
            <div id="<%= makeid(); %>" data-toggle="popover" data-placement="top" data-content="Relocation Allowance = yes"></div>
            <p class="text-justify">As part of the relocation assistance, you shall also receive a one-time relocation allowance of <mark><$client.tForWhomUserInfo.ESTIMATED_RELO_COST></mark>&nbsp;<mark><$client.tForWhomUserInfo.ESTIMATED_RELO_COST_CRNCY_CD></mark> payable during the first month of employment. This payment is subject to the applicable deductions and taxes.</p>
            <p class="text-justify">Should your employment be terminated by the <mark><$client.tForWhomUserInfo.EnityName_Description></mark> for a justified reason for which you are responsible or as a result of your resignation within one year from your start date, your obligation to repay the relocation allowance and the relocation expenses, will be reduced by 1/12th for every full month of active employment.</p>
        </div>
        <% } %>
        <% if ('<$client.tForWhomUserInfo.Hire_on_Bonus_Eligible>' == 'Yes') { %>
        <div class="marked">
            <div id="<%= makeid(); %>" data-toggle="popover" data-placement="top" data-content="Sign On/Hire on Bonus Eligible = Yes"></div>
            <p class="text-justify">You shall receive a Sign on bonus of <mark><$client.tForWhomUserInfo.HIRE_ON_BONUS_AMOUNT></mark>&nbsp;<mark><$client.tForWhomUserInfo.HIRE_ON_BONUS_CRNCY_CD></mark>, paid with your first salary. This payment is subject to the applicable deductions and taxes. In the event that your employment ceases for any reason prior to completion of first year from the start date, the net value of the Sign on bonus shall be refundable to the Company on a pro-rated basis and your repayment obligation will be reduced by 1/12 for every full month of employment over the course of the year.</p>
        </div>
        <% } %>
        <p class="text-justify">You will be entitled to the statutory and contractual benefits in Ireland and you will receive further details in your offer pack.</p>
        <p class="text-justify">As a condition of your employment, you will be required to sign a formal employment contract containing the terms set forth in this offer letter. This offer of employment is made subject to:</p>
        <ol>
            <li>Receipt, prior to your start date, of satisfactory written references from your current employer or any other applicable references;</li>
            <li>Successful completion of international background; </li>
            <li>Proof of your ability to work in Ireland on a continuous basis.</li>
        </ol>
        <p class="text-justify">This offer of employment will lapse if not signed and returned within 10 days of the date of issue.</p>
        <p class="text-justify">Please bring Photo Identification ( Passport and National Identity Card), and proof of your ability to work in Ireland (if applicable) with you on your first day as we will need to see the original and take a copy for our files.</p>
        <p class="text-justify mb-4">All of us at <mark><$client.tForWhomUserInfo.EnityName_Description></mark> are very excited about you joining our team and look forward to a beneficial and fruitful working relationship. </p>
        <p class="hide">&nbsp;</p>
        <p class="text-justify">Yours sincerely,</p>
        <p class="text-justify"><mark><%= signatory %></mark></p>
        <p class="text-justify mb-4">Signature area indicating acceptance of the above terms and conditions below</p>
        <p class="hide"></p>
    </template>
    
    <div class="offer-letter-body">
        <div class="row">
            <div class="col-sm-offset-2 col-sm-8">
                <div id="incomplete">
                    <div id="markup1"></div>
                </div>
                <div id="complete"></div>
            </div>
        </div>
    </div>
    <template id="fragment-2">
        <p class="ml-lg-4">
            <strong>Employee:</strong>
        </p>
    </template>
    <div class="row">
        <div class="col-lg-12">
            <div id="incomplete2">
                <div id="markup2"></div>
            </div>
            <div id="complete2"></div>
        </div>
    </div>
    <div class="row mb-3">
        <div class="col-sm-2 pt-3 text-sm-right">
            <label for="signature" class="control-label">Signature: <span class="text-danger">*</span></label>
        </div>
        <div class="col-sm-5">
            <$client.env.FormField.signature.HTML>
        </div>
        <div class="col-sm-1 pt-3 text-sm-right">
            <label class="control-label">Date:</label>
        </div>
        <div class="col-sm-3">
            <$client.env.FormField.date.HTML>
        </div>
    </div>
    <div class="row mb-3">
        <div class="col-sm-2 pt-3 text-sm-right">
            <label for="full_name" class="control-label">Name:</label>
        </div>
        <div class="col-sm-5">
            <$client.env.FormField.name.HTML>
        </div>
    </div>
    <div class="row mb-5">
        <div class="col-sm-3 pt-3 text-sm-right">
            <label class="control-label">Anticipated Start Date:</label>
        </div>
        <div class="col-sm-4">
            <$client.env.FormField.AnticipatedStartDate.HTML>
        </div>
    </div>

    <template id="fragment-3">
        <p class="ml-lg-4">
            <strong>Employer:</strong>
        </p>
    </template>
    <div class="row">
        <div class="col-lg-12">
            <div id="incomplete3">
                <div id="markup3"></div>
            </div>
            <div id="complete3"></div>
        </div>
    </div>
    <div class="row mb-3">
        <div class="col-sm-2 pt-3 text-sm-right">
            <label for="signature" class="control-label">Signature: <span class="text-danger">*</span></label>
        </div>
        <div class="col-sm-5">
            <$client.env.FormField.signature2.HTML>
        </div>
        <div class="col-sm-1 pt-3 text-sm-right">
            <label class="control-label">Date:</label>
        </div>
        <div class="col-sm-3">
            <$client.env.FormField.date2.HTML>
        </div>
    </div>
    <div class="row mb-5">
        <div class="col-sm-2 pt-3 text-sm-right">
            <label for="full_name" class="control-label">Name:</label>
        </div>
        <div class="col-sm-5">
            <$client.env.FormField.name2.HTML>
        </div>
    </div>

    <template id="fragment-4">
        <p>*Please state your anticipated start date based on conversations you have had with your new manager and on information you have about your notice period.</p>
    </template>
    <div class="row mb-5">
        <div class="col-lg-12">
            <div id="incomplete4">
                <div id="markup4"></div>
            </div>
            <div id="complete4"></div>
        </div>
    </div>

    <hr class="lifesuite__hr">
    <div class="row" id="formButtons" style="display: none;">
        <div class="col-lg-12 clearfix">
            <div class="sign-btn-group">
                <$client.env.FormButtons>
            </div>
        </div>
    </div>
</main>

<div hidden>
    <$client.env.FormField.SignatureVerification.HTML>
    <$client.env.FormField.SignatureVerification2.HTML>
    <$client.env.FormField.hidden_pg1.HTML>
    <$client.env.FormField.hidden_pg2.HTML>     
    <$client.env.FormField.hidden_pg3.HTML>
    <$client.env.FormField.hidden_pg4.HTML>
    <$client.env.formfield.EmployeeStamp.html>
    <$client.env.formfield.SignatoryStamp.html>
    <$client.env.formfield.RecruiterStamp.html>
    <$client.env.formfield.SignerMan.html>
    <$client.env.formfield.CoordinatorStamp.html>
    <$client.env.formfield.Current_Date.html>
</div>

</form>
<script src="<$link;/main/RedCarpet/FormTemplates/Ireland_Offer_Letter___Paypal/js/bootstrap.min.js>"></script>
<script type="text/javascript" src="<$link;/main/RedCarpet/FormTemplates/FormSupport/js/front_validator.js>"></script> 
<script type="text/javascript" src="<$link;/main/RedCarpet/FormTemplates/FormSupport/js/moment-with-locales.min.js>"></script> 
<script src="<$link;/main/RedCarpet/FormTemplates/Ireland_Offer_Letter___Paypal/js/ejs.min.js>"></script>
<script src="<$link;/main/RedCarpet/FormTemplates/Ireland_Offer_Letter___Paypal/js/script.js>" defer></script>
<script>
showScreen('over');
ChangeCalendarIcons(); //for popup calendar
const thisForm = document.getElementById('italy-offer-letter');
/* RESPONSIVE eFORM BUTTONS STYLE */
$(document).on('ready', function() {
  $("#buttonCancel").removeClass().addClass("lifesuite__button").prop('id','ButtonCancel');
  $("#buttonSave").removeClass().addClass("lifesuite__button primary").prop('id','ButtonSave');
  $("#buttonSaveAndComplete").removeClass().addClass("lifesuite__button primary").prop('id','ButtonSaveAndComplete').prop('onclick', null);
  $("#buttonPrint").removeClass().addClass("lifesuite__button primary").prop('id','ButtonPrint').prop('onclick', null);
  $("#buttonPreviewDelete").removeClass().addClass("lifesuite__button").prop('id','ButtonPreviewDelete');
  $("#buttonPreviewSave").removeClass().addClass("lifesuite__button primary").prop('id','ButtonPreviewSave');
  $("#buttonComplete").removeClass().addClass("lifesuite__button primary").prop('id','ButtonComplete');
  document.getElementById('formButtons').style.display = "block";
  $("input[type=text]").addClass('lifesuite__text-input');
  $("input[type=text].hasDatepicker").addClass('dateField');
  $("select").addClass('lifesuite__select-input');
  $("input[type=radio]").addClass('lifesuite__radio');
  $("input[type=checkbox]").addClass('lifesuite__checkbox');
  $("textarea").addClass('lifesuite__textarea-input');
  $('label').addClass('lifesuite__input-label lifesuite__inputâ€”block');
  $('.signDate, .dateField').parent().find('input').prop('disabled', true);
});

const data = {
    'Current_Date': document.getElementById('Current_Date').value,
    'signatory': ''
};
const isNewhire = $('#hidden_pg').prop('readonly') || <$client.env.eval((url.forWhom==account.userguid)?'true':'false')>;
// signature section clearing on task reopen variables
const isCoordinator = <$client.env.eval((client.role.rc_hrcoordinators==1)?'true':'false')>;
const isRecruiter = <$client.env.eval((client.tEventManagers_Person_8.UserGuid==account.userguid)?'true':'false')>;
const isSignatory = <$client.env.eval((client.role.rc_ireland_company_signatory>0)?'true':'false')>;
const isEmployee = <$client.env.eval((url.forWhom==account.userguid)?'true':'false')>;
const EmployeeStamp = "<$client.env.eval((url.forWhom==account.userguid)?'EmployeeStamp':'')>"; 
if (isSignatory) {
    $('#SignerMan').val("<$client.account.username_first> <$client.account.username>");
}
</script>
