<div id="task_summary_outer">
    <div id="EditProfile_container">
        <div id="EditProfile_wrapper">
            <div id="EditProfile">
                <h2>Kirkland &amp; Ellis New Joiner Information</h2>

                <div class="heading">
                    <span class="heading-inner">
                        Clerkship Information
                    </span>
                </div>

                <section class="clerkship-section mb-13">
                    <div class="input_wrapper" data-fieldgroup-title="Clerkship Information">
                        <span class="floating-label">Clerkship Court</span>
                        <$client.env.inputClerkship_ID_1_Court>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Judge">
                        <span class="floating-label">Judge</span>
                        <$client.env.inputClerkship_ID_1_Judge>
                    </div>
                    <div class="merge equal">
                        <div class="input_wrapper" data-fieldgroup-title="Month Clerkship Began">
                            <span class="floating-label">Month Clerkship Began</span>
                            <$client.env.inputClerkship_ID_1_From_Month>
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Month Clerkship Ended">
                            <span class="floating-label">Month Clerkship Ended</span>
                            <$client.env.inputClerkship_ID_1_To_month>
                        </div>
                    </div>
                    <div class="merge equal">
                        <div class="input_wrapper" data-fieldgroup-title="Year Clerkship Began">
                            <span class="floating-label">Year Clerkship Began</span>
                            <$client.env.inputClerkship_ID_1_From_year>
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Year Clerkship Ended">
                            <span class="floating-label">Year Clerkship Ended</span>
                            <$client.env.inputClerkship_ID_1_To_year>
                        </div>
                    </div>
                    <div class="input_wrapper clearfix">
                        <button class="lifesuite__button bg-ignite remove-clerkship-section pull-right" type="button" role="button">Remove</button>
                    </div>
                </section>
 
                <section class="clerkship-section mb-13">
                    <div class="input_wrapper" data-fieldgroup-title="Clerkship Information" data-fieldgroup-validation="required">
                        <span class="floating-label">Clerkship Court</span>
                        <$client.env.inputClerkship_ID_2_Court>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Judge">
                        <span class="floating-label">Judge</span>
                        <$client.env.inputClerkship_ID_2_Judge>
                    </div>
                    <div class="merge equal">
                        <div class="input_wrapper" data-fieldgroup-title="Month Clerkship Began">
                            <span class="floating-label">Month Clerkship Began</span>
                            <$client.env.inputClerkship_ID_2_From_Month>
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Month Clerkship Ended">
                            <span class="floating-label">Month Clerkship Ended</span>
                            <$client.env.inputClerkship_ID_2_To_month>
                        </div>
                    </div>
                    <div class="merge equal">
                        <div class="input_wrapper" data-fieldgroup-title="Year Clerkship Began">
                            <span class="floating-label">Year Clerkship Began</span>
                            <$client.env.inputClerkship_ID_2_From_year>
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Year Clerkship Ended">
                            <span class="floating-label">Year Clerkship Ended</span>
                            <$client.env.inputClerkship_ID_2_To_year>
                        </div>
                    </div>
                    <div class="input_wrapper clearfix">
                        <button class="lifesuite__button bg-ignite remove-clerkship-section pull-right" type="button" role="button">Remove</button>
                    </div>
                </section>

                <section class="clerkship-section mb-13">
                    <div class="input_wrapper" data-fieldgroup-title="Clerkship Information" data-fieldgroup-validation="required">
                        <span class="floating-label">Clerkship Court</span>
                        <$client.env.inputClerkship_ID_3_Court>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Judge">
                        <span class="floating-label">Judge</span>
                        <$client.env.inputClerkship_ID_3_Judge>
                    </div>
                    <div class="merge equal">
                        <div class="input_wrapper" data-fieldgroup-title="Month Clerkship Began">
                            <span class="floating-label">Month Clerkship Began</span>
                            <$client.env.inputClerkship_ID_3_From_Month>
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Month Clerkship Ended">
                            <span class="floating-label">Month Clerkship Ended</span>
                            <$client.env.inputClerkship_ID_3_To_month>
                        </div>
                    </div>
                    <div class="merge equal">
                        <div class="input_wrapper" data-fieldgroup-title="Year Clerkship Began">
                            <span class="floating-label">Year Clerkship Began</span>
                            <$client.env.inputClerkship_ID_3_From_year>
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Year Clerkship Ended">
                            <span class="floating-label">Year Clerkship Ended</span>
                            <$client.env.inputClerkship_ID_3_To_year>
                        </div>
                    </div>
                    <div class="input_wrapper clearfix">
                        <button class="lifesuite__button bg-ignite remove-clerkship-section pull-right" type="button" role="button">Remove</button>
                    </div>
                </section>

                <section class="clerkship-section mb-13">
                    <div class="input_wrapper" data-fieldgroup-title="Clerkship Information" data-fieldgroup-validation="required">
                        <span class="floating-label">Clerkship Court</span>
                        <$client.env.inputClerkship_ID_4_Court>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Judge">
                        <span class="floating-label">Judge</span>
                        <$client.env.inputClerkship_ID_4_Judge>
                    </div>
                    <div class="merge equal">
                        <div class="input_wrapper" data-fieldgroup-title="Month Clerkship Began">
                            <span class="floating-label">Month Clerkship Began</span>
                            <$client.env.inputClerkship_ID_4_From_Month>
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Month Clerkship Ended">
                            <span class="floating-label">Month Clerkship Ended</span>
                            <$client.env.inputClerkship_ID_4_To_month>
                        </div>
                    </div>
                    <div class="merge equal">
                        <div class="input_wrapper" data-fieldgroup-title="Year Clerkship Began">
                            <span class="floating-label">Year Clerkship Began</span>
                            <$client.env.inputClerkship_ID_4_From_year>
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Year Clerkship Ended">
                            <span class="floating-label">Year Clerkship Ended</span>
                            <$client.env.inputClerkship_ID_4_To_year>
                        </div>
                    </div>
                    <div class="input_wrapper clearfix">
                        <button class="lifesuite__button bg-ignite remove-clerkship-section pull-right" type="button" role="button">Remove</button>
                    </div>
                </section>

                <section class="clerkship-section mb-13">
                    <div class="input_wrapper" data-fieldgroup-title="Clerkship Information" data-fieldgroup-validation="required">
                        <span class="floating-label">Clerkship Court</span>
                        <$client.env.inputClerkship_ID_5_Court>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Judge">
                        <span class="floating-label">Judge</span>
                        <$client.env.inputClerkship_ID_5_Judge>
                    </div>
                    <div class="merge equal">
                        <div class="input_wrapper" data-fieldgroup-title="Month Clerkship Began">
                            <span class="floating-label">Month Clerkship Began</span>
                            <$client.env.inputClerkship_ID_5_From_Month>
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Month Clerkship Ended">
                            <span class="floating-label">Month Clerkship Ended</span>
                            <$client.env.inputClerkship_ID_5_To_month>
                        </div>
                    </div>
                    <div class="merge equal">
                        <div class="input_wrapper" data-fieldgroup-title="Year Clerkship Began">
                            <span class="floating-label">Year Clerkship Began</span>
                            <$client.env.inputClerkship_ID_5_From_year>
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Year Clerkship Ended">
                            <span class="floating-label">Year Clerkship Ended</span>
                            <$client.env.inputClerkship_ID_5_To_year>
                        </div>
                    </div>
                    <div class="input_wrapper clearfix">
                        <button class="lifesuite__button bg-ignite remove-clerkship-section pull-right" type="button" role="button">Remove</button>
                    </div>
                </section>

                <div class="input_wrapper mb-18">
                    <button id="add-additional-clerkship" type="button" role="button" class="lifesuite__button bg-jade pull-right">Add Additional Clerkship</button>
                </div>

                <section class="bar-section mb-13">
                    <div class="input_wrapper" data-fieldgroup-title="Bar Country" data-fieldgroup-validation="required">
                        <span class="floating-label">Bar Country</span>
                        <$client.env.inputBar_Country>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar Category">
                        <span class="floating-label">Bar Category</span>
                        <$client.env.inputBar_Category>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar State">
                        <span class="floating-label">Bar State</span>
                        <$client.env.inputBar_State>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar Jurisdiction">
                        <span class="floating-label">Bar Jurisdiction</span>
                        <$client.env.inputBar_Jurisdiction>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar Admission Date">
                        <span class="floating-label">Bar Admission Date</span>
                        <$client.env.inputBar_Admission_Date>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar License / Registration Number">
                        <span class="floating-label">Bar License / Registration Number</span>
                        <$client.env.inputBar_Registration_Number>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar Status">
                        <span class="floating-label">Bar Status</span>
                        <$client.env.inputBar_Status>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar Effective Date">
                        <span class="floating-label">Bar Effective Date</span>
                        <$client.env.inputBar_Effective_Date>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Name Barred with">
                        <span class="floating-label">Name Barred with</span>
                        <$client.env.inputName_Barred_with>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Reason Pending or Suspended?">
                        <span class="floating-label">Reason Pending or Suspended?</span>
                        <$client.env.inputBar_Reason>
                    </div>
                    <div class="input_wrapper clearfix">
                        <button class="lifesuite__button bg-ignite remove-bar-section pull-right" type="button" role="button">Remove</button>
                    </div>
                </section>

                <section class="bar-section mb-13">
                    <div class="input_wrapper" data-fieldgroup-title="Bar Country" data-fieldgroup-validation="required">
                        <span class="floating-label">Bar Country</span>
                        <$client.env.inputBar_Country_2>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar Category">
                        <span class="floating-label">Bar Category</span>
                        <$client.env.inputBar_Category_2>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar State">
                        <span class="floating-label">Bar State</span>
                        <$client.env.inputBar_State2>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar Jurisdiction">
                        <span class="floating-label">Bar Jurisdiction</span>
                        <$client.env.inputBar_Jurisdiction2>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar Admission Date">
                        <span class="floating-label">Bar Admission Date</span>
                        <$client.env.inputBar_Admission_Date2>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar License / Registration Number">
                        <span class="floating-label">Bar License / Registration Number</span>
                        <$client.env.inputBar_Registration_Number2>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar Status">
                        <span class="floating-label">Bar Status</span>
                        <$client.env.inputBar_Status2>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar Effective Date">
                        <span class="floating-label">Bar Effective Date</span>
                        <$client.env.inputBar_Effective_Date2>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Name Barred with">
                        <span class="floating-label">Name Barred with</span>
                        <$client.env.inputName_Barred_with2>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Reason Pending or Suspended?">
                        <span class="floating-label">Reason Pending or Suspended?</span>
                        <$client.env.inputBar_Reason2>
                    </div>
                    <div class="input_wrapper clearfix">
                        <button class="lifesuite__button bg-ignite remove-bar-section pull-right" type="button" role="button">Remove</button>
                    </div>
                </section>

                <section class="bar-section mb-13">
                    <div class="input_wrapper" data-fieldgroup-title="Bar Country" data-fieldgroup-validation="required">
                        <span class="floating-label">Bar Country</span>
                        <$client.env.inputBar_Country_3>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar Category">
                        <span class="floating-label">Bar Category</span>
                        <$client.env.inputBar_Category_3>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar State">
                        <span class="floating-label">Bar State</span>
                        <$client.env.inputBar_State3>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar Jurisdiction">
                        <span class="floating-label">Bar Jurisdiction</span>
                        <$client.env.inputBar_Jurisdiction3>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar Admission Date">
                        <span class="floating-label">Bar Admission Date</span>
                        <$client.env.inputBar_Admission_Date3>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar License / Registration Number">
                        <span class="floating-label">Bar License / Registration Number</span>
                        <$client.env.inputBar_Registration_Number3>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar Status">
                        <span class="floating-label">Bar Status</span>
                        <$client.env.inputBar_Status3>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Bar Effective Date">
                        <span class="floating-label">Bar Effective Date</span>
                        <$client.env.inputBar_Effective_Date3>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Name Barred with">
                        <span class="floating-label">Name Barred with</span>
                        <$client.env.inputName_Barred_with3>
                    </div>
                    <div class="input_wrapper" data-fieldgroup-title="Reason Pending or Suspended?">
                        <span class="floating-label">Reason Pending or Suspended?</span>
                        <$client.env.inputBar_Reason3>
                    </div>
                    <div class="input_wrapper clearfix">
                        <button class="lifesuite__button bg-ignite remove-bar-section pull-right" type="button" role="button">Remove</button>
                    </div>
                </section>
                <div class="input_wrapper mb-18">
                    <button id="add-additional-bar" type="button" role="button" class="lifesuite__button bg-jade pull-right">Add Additional Bar Information</button>
                </div>
                <div class="mb-18"></div>

                <div class="heading">
                    <span class="heading-inner">
                        Citizenship
                    </span>
                </div>

                <div class="input_wrapper" data-fieldgroup-title="Hong Kong Permanent Resident" data-fieldgroup-targetlabel="#HK_Perm_Res_1_label" data-fieldgroup-validation="required">
                    <label id="HK_Perm_Res_1_label">Hong Kong Permanent Resident</label>
                    <$client.env.inputHK_Perm_Res_1>
                </div>
                <section class="visa-section mb-13">
                    <div class="input_wrapper" data-fieldgroup-title="Passport Number">
                        <span class="floating-label">Passport Number</span>
                        <$client.env.inputPassport_Number_1>
                    </div>
                    <div id="visa-inner-section-1">
                        <div class="input_wrapper" data-fieldgroup-title="Passport Issue Date" data-fieldgroup-validation="required,past-date">
                            <span class="floating-label">Passport Issue Date</span>
                            <input type="text" name="Passport_Issue_date_1_pseudo" id="Passport_Issue_date_1_pseudo" class="date-field" readonly data-date-enabled="false">
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Passport Expiration Date" data-fieldgroup-validation="required,future-date">
                            <span class="floating-label">Passport Expiration Date</span>
                            <input type="text" name="Passport_Expiration_Date_1_pseudo" id="Passport_Expiration_Date_1_pseudo" class="date-field" readonly data-date-enabled="false">
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Citizenship Country" data-fieldgroup-validation="required">
                            <span class="floating-label">Citizenship Country</span>
                            <$client.env.inputCitizenship_Country_1>
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Visa" data-fieldgroup-targetlabel="#Visa_1_label" data-fieldgroup-validation="required">
                            <label id="Visa_1_label">Visa</span>
                            <$client.env.inputVisa_1>
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Visa Type" data-fieldgroup-validation="required">
                            <span class="floating-label">Visa Type</span>
                            <$client.env.inputVisa_Type_1>
                        </div>
                    </div>
                    <div class="input_wrapper clearfix">
                        <button class="lifesuite__button bg-ignite remove-visa-section pull-right" type="button" role="button">Remove</button>
                    </div>
                </section>

                <section class="visa-section mb-13">
                    <div class="input_wrapper" data-fieldgroup-title="Passport Number">
                        <span class="floating-label">Passport Number</span>
                        <$client.env.inputPassport_Number_2>
                    </div>
                    <div id="visa-inner-section-2">
                        <div class="input_wrapper" data-fieldgroup-title="Passport Issue Date" data-fieldgroup-validation="required,past-date">
                            <span class="floating-label">Passport Issue Date</span>
                            <input type="text" name="Passport_Issue_date_2_pseudo" id="Passport_Issue_date_2_pseudo" class="date-field" readonly data-date-enabled="false">
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Passport Expiration Date" data-fieldgroup-validation="required,future-date">
                            <span class="floating-label">Passport Expiration Date</span>
                            <input type="text" name="Passport_Expiration_Date_2_pseudo" id="Passport_Expiration_Date_2_pseudo" class="date-field" readonly data-date-enabled="false">
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Visa" data-fieldgroup-targetlabel="#Visa_2_label" data-fieldgroup-validation="required">
                            <label id="Visa_2_label">Visa</span>
                            <$client.env.inputVisa_2>
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Visa Type" data-fieldgroup-validation="required">
                            <span class="floating-label">Visa Type</span>
                            <$client.env.inputVisa_Type_2>
                        </div>
                    </div>
                    <div class="input_wrapper clearfix">
                        <button class="lifesuite__button bg-ignite remove-visa-section pull-right" type="button" role="button">Remove</button>
                    </div>
                </section>

                <section class="visa-section mb-13">
                    <div class="input_wrapper" data-fieldgroup-title="Passport Number">
                        <span class="floating-label">Passport Number</span>
                        <$client.env.inputPassport_Number_3>
                    </div>
                    <div id="visa-inner-section-3">
                        <div class="input_wrapper" data-fieldgroup-title="Passport Issue Date" data-fieldgroup-validation="required,past-date">
                            <span class="floating-label">Passport Issue Date</span>
                            <input type="text" name="Passport_Issue_date_3_pseudo" id="Passport_Issue_date_3_pseudo" class="date-field" readonly data-date-enabled="false">
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Passport Expiration Date" data-fieldgroup-validation="required,future-date">
                            <span class="floating-label">Passport Expiration Date</span>
                            <input type="text" name="Passport_Expiration_Date_3_pseudo" id="Passport_Expiration_Date_3_pseudo" class="date-field" readonly data-date-enabled="false">
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Visa" data-fieldgroup-targetlabel="#Visa_3_label" data-fieldgroup-validation="required">
                            <label id="Visa_3_label">Visa</span>
                            <$client.env.inputVisa_3>
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Visa Type" data-fieldgroup-validation="required">
                            <span class="floating-label">Visa Type</span>
                            <$client.env.inputVisa_Type_3>
                        </div>
                    </div>
                    <div class="input_wrapper clearfix">
                        <button class="lifesuite__button bg-ignite remove-visa-section pull-right" type="button" role="button">Remove</button>
                    </div>
                </section>

                <section class="visa-section mb-13">
                    <div class="input_wrapper" data-fieldgroup-title="Passport Number">
                        <span class="floating-label">Passport Number</span>
                        <$client.env.inputPassport_Number_4>
                    </div>
                    <div id="visa-inner-section-4">
                        <div class="input_wrapper" data-fieldgroup-title="Passport Issue Date" data-fieldgroup-validation="required,past-date">
                            <span class="floating-label">Passport Issue Date</span>
                            <input type="text" name="Passport_Issue_date_4_pseudo" id="Passport_Issue_date_4_pseudo" class="date-field" readonly data-date-enabled="false">
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Passport Expiration Date" data-fieldgroup-validation="required,future-date">
                            <span class="floating-label">Passport Expiration Date</span>
                            <input type="text" name="Passport_Expiration_Date_4_pseudo" id="Passport_Expiration_Date_4_pseudo" class="date-field" readonly data-date-enabled="false">
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Visa" data-fieldgroup-targetlabel="#Visa_4_label" data-fieldgroup-validation="required">
                            <label id="Visa_4_label">Visa</span>
                            <$client.env.inputVisa_4>
                        </div>
                        <div class="input_wrapper" data-fieldgroup-title="Visa Type" data-fieldgroup-validation="required">
                            <span class="floating-label">Visa Type</span>
                            <$client.env.inputVisa_Type_4>
                        </div>
                    </div>
                    <div class="input_wrapper clearfix">
                        <button class="lifesuite__button bg-ignite remove-visa-section pull-right" type="button" role="button">Remove</button>
                    </div>
                </section>

                <div class="input_wrapper mb-18">
                    <button id="add-visa" type="button" role="button" class="lifesuite__button bg-jade pull-right">Add Visa</button>
                </div>

                <div class="button_group">
                    <div id="save" class="input_wrapper clearfix mb-18"></div>
                    <div id="saveandcomplete" class="input_wrapper clearfix"></div>
                    <div id="cancel" class="input_wrapper clearfix"></div>
                </div>

                <div hidden>
                    <$client.env.inputSilkroad_ID>
                    <$client.env.inputApplicantID>
                    <$client.env.inputApplicationID>
                    <$client.env.inputVisa_Country_1>
                    <$client.env.inputVisa_Country_2>
                    <$client.env.inputVisa_Country_3>
                    <$client.env.inputVisa_Country_4>
                    <$client.env.inputCitizenship_Country_1>
                    <$client.env.inputCitizenship_Country_2>
                    <$client.env.inputCitizenship_Country_3>
                    <$client.env.inputCitizenship_Country_4>
                    <$client.env.inputPassport_Issue_date_1>
                    <$client.env.inputPassport_Expiration_Date_1>
                    <$client.env.inputPassport_Issue_date_2>
                    <$client.env.inputPassport_Expiration_Date_2>
                    <$client.env.inputPassport_Issue_date_3>
                    <$client.env.inputPassport_Expiration_Date_3>
                    <$client.env.inputPassport_Issue_date_4>
                    <$client.env.inputPassport_Expiration_Date_4>
                    <input type="text" name="Employee_HRISID" value="<$client.tForWhomUserInfo.Employee_HRISID>" />
                    <input type="text" id="hire-date" name="hire-date" value="<$client.env.eval(client.tForWhomUserInfo.Hire_DT.subString(0,3))>-<$client.env.eval(client.tForWhomUserInfo.Hire_DT.subString(5,6))>-<$client.env.eval(client.tForWhomUserInfo.Hire_DT.subString(8,9))>" />
                    <input type="text" name="Start_Date" value="<$client.tEventDates_2.Value>" />
                    <input id="job-code" type="text" value="<$client.tEventCategories_15.Code>">
                    <input id="office-code" type="text" value="<$client.tEventCategories_Category_21.Code>">
                    <input id="event-location-value" type="text" value="<$client.env.eval(client.tEventCategories_Category_21.Value.length()>0?client.tEventCategories_Category_21.Value:'USA')>">
                    <input id="event-location-code" type="text" value="<$client.env.eval(client.tEventCategories_Category_21.Value.length()>0?client.tEventCategories_Category_21.Code:'USA')>">
                </div>

            </div><!-- end editprofile -->
        </div>
    </div>
</div>

<script type="text/javascript" src="<$link;/main/RedCarpet/FormTemplates/FormSupport/js/moment-with-locales.min.js>"></script>
<script type="text/javascript" src="<$link;/main/RedCarpet/FormTemplates/FormSupport/js/global_date_formatter.js>"></script>
<script type="text/javascript" src="<$link;/main/RedCarpet/FormTemplates/FormSupport/js/jquery.mask.min.js>"></script>
<script type="text/javascript" src="<$link;/main/RedCarpet/FormTemplates/FormSupport/js/front_validator.js>" defer></script>

<!-- configuration files and libraries are included here  -->
<script type="text/javascript" src="<$link;/main/RedCarpet/FormTemplates/FormSupport/js/global_date_config.js>"></script>
<script type="text/javascript" src="<$link;/map_images/main/SiteGen/Onboarding/Content/UnplacedPages/shared/country_codes_config.js>"></script>
<script type="text/javascript" src="<$link;/map_images/main/SiteGen/Onboarding/Content/UnplacedPages/shared/action_reason_mapping.js>"></script>
<script type="text/javascript" src="<$link;/map_images/main/SiteGen/Onboarding/Content/UnplacedPages/shared/job_code_mapping.js>"></script>
<script type="text/javascript" src="<$link;/map_images/main/SiteGen/Onboarding/Content/UnplacedPages/shared/national_id_mapping.js>"></script>
<script type="text/javascript" src="<$link;/map_images/main/SiteGen/Onboarding/Content/UnplacedPages/shared/timezone_config.js>"></script>
<script type="text/javascript" src="<$link;/map_images/main/SiteGen/Onboarding/Content/UnplacedPages/shared/vex.min.js>"></script>
<script type="text/javascript">
    const ID_TYPES = new Map(); // store id types 
    const ACTION_REASONS = new Map(); // store id types 
    const ALL_STATES = new Map(); // store all states list
    const providerContext = document.getElementById('#EditProfile');

    const MONTH_DATES = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

    const focusInputLabel = function(obj, isFocused) {
        "use strict";
        obj.each(function(k, v) {
            const el = $(v);
            let label = el.closest('.input_wrapper')
                .find('span.floating-label')
                .removeClass('label-focus')
                .css({"color": "#1C1C1C"});
            if (el.is('select') && el.val() === null) {
                return;
            }
            if (el.val().trim().length > 0 || isFocused) {
                label.addClass('label-focus');
            }
            if (isFocused === true) {
                label.css({"color": "#1C1C1C"});
            }
        });
    }
    const fieldHasVal = function(el) {
        "use strict";
        let hasVal = false;
        $.each(el, function(k, v) {
            if ($(v).is(':radio')) {
                hasVal = isCheckboxChecked($(v));
                return hasVal;
            }
            if ($(v).is('select') && $(v).val() == null) {
                return hasVal;
            }
            if ($(v).val().length) {
                hasVal = true;
            }
        });
        return hasVal;
    }
    const isCheckboxChecked = function(el) {
        "use strict";
        let hasChecked = false;
        $.each(el, function(k,v){
            if ($(v).is(':checked')) {
                hasChecked = true;
            }
        });
        return hasChecked;
    }

    const hideSection = function(section) {
        "use strict";
        if (fieldHasVal(section)) {
            section.hide().find('input').val('');
        }
    }

    const extractCountryFromCode = function(countryCodes, code) {
        "use strict";
        for (let i = 0; i < countryCodes.length; i++) {
            if (countryCodes[i].codes.indexOf(code) > -1) {
                return countryCodes[i].country;
            }
        }
        return "USA";
    }

    // toggle require bar section if bar section is not empty
    const requireBarIfNotEmpty = function() {
        "use strict";
        const section = $(this).closest('.bar-section');
        let filled = false;
        section.find('input, select').each(function(k,v) {
            if (fieldHasVal($(v))) {
                filled = true;
            }
        });
        if (!filled) {
            section.find('input, select').each(function(k,v) {
                validateField($(v).data('validation', null), true);
            });
            return;
        }
        section.find('input, select').each(function(k,v) {
            $(v).data('validation', 'required');
        });
    }
   
    vex.defaultOptions.className = 'vex-theme-top'; 
    $(window).on('load', function() {
        $('.floating-label span').css('color', 'rgb(102, 102, 102)');
        $('.cal_and_button').prop({'cellpadding': 0, 'cellspacing': 0});
        let isProfileCompleted = sTaskComplete;
        // replace default submit button with paypal styled
        $('#TaskSummary_ButtonCancel').appendTo('#cancel').show();
        if (!isProfileCompleted) {
            $('#TaskSummary_ButtonSave').appendTo('#saveandcomplete').prop('onclick', null).show().text('Continue');
            $('#EUPDefaultSaveButton').appendTo('#save').show();
        }
        $('textarea').addClass('lifesuite__textarea-input');

        // store action reasons
        $('[name$=".Bar_Reason"] option').each(function() {
            ACTION_REASONS.set($(this).val(), $(this).text());
        });

        // remove unused fields
        $('input[type="radio"][value=""]').closest('div').remove();

        // load form when all set
        $('#EditProfile_wrapper').fadeIn();

        // initiate datepickers
        const dateFields = $('.date-field').formatDatePicker(dateConfig, extractCountryFromCode(COUNTRY_CODES, $('#event-location-code').val()))
            .datepicker("option", "onSelect", function(dateText, instance) {
                // pass value from static fields to eup dates EUPDATE_display will get from EUPDATE_pseudo
                $('[name$=".' + $(this).prop('name').replace('_pseudo', '_display') + '"]')
                    .datepicker('setDate', $(this).datepicker('getDate'));
                validateField($(this)); 
                focusInputLabel($(this));
            });

        // assign back the values from eup to static datepicker fields on load
        dateFields.each(function() {
            if ($('[name$=".' + $(this).prop('name').replace('_pseudo', '_display') + '"]').datepicker('getDate')) {
                $(this).datepicker('setDate', $('[name$=".' + $(this).prop('name').replace('_pseudo', '_display') + '"]').datepicker('getDate'));
            }
        });

        // full date datepicker
        $('[name$=".Bar_Admission_Date"], [name$=".Bar_Admission_Date2"], [name$=".Bar_Admission_Date3"], [name$=".Bar_Effective_Date"], [name$=".Bar_Effective_Date2"], [name$=".Bar_Effective_Date3"]', providerContext)
            .prop('readonly', 'readonly')
            .data('date-enabled', false)
            .formatDatePicker(dateConfig, extractCountryFromCode(COUNTRY_CODES, $('#event-location-code').val()))
            .datepicker("option", "onSelect", function(dateText, instance) {
                validateField($(this)); 
                focusInputLabel($(this));
            });

        // clerkship section
        // toogle required for 1st clerkship section
        $('[name$=".Clerkship_ID_1_Court"]', providerContext).on('change', function() {
            const dependentFields = $('[name$=".Clerkship_ID_1_Judge"], [name$=".Clerkship_ID_1_From_Month"], [name$=".Clerkship_ID_1_To_month"], [name$=".Clerkship_ID_1_From_year"], [name$=".Clerkship_ID_1_To_year"]');
            if ($(this).val().length > 0) {
                dependentFields.data('validation', 'required')
                return;
            }
            dependentFields.data('validation', null).each(function(k,v) {
                validateField($(v), true);
            });
        });
        $('#EditProfile [name$=".Clerkship_ID_1_Court"]').trigger('change');
        // toogle required for 2nd clerkship section
        $('[name$=".Clerkship_ID_2_Court"]', providerContext).on('change', function() {
            const dependentFields = $('[name$=".Clerkship_ID_2_Judge"], [name$=".Clerkship_ID_2_From_Month"], [name$=".Clerkship_ID_2_To_month"], [name$=".Clerkship_ID_2_From_year"], [name$=".Clerkship_ID_2_To_year"]');
            if ($(this).val().length > 0) {
                dependentFields.data('validation', 'required')
                return;
            }
            dependentFields.data('validation', null).each(function(k,v) {
                validateField($(v), true);
            });
        });
        $('#EditProfile [name$=".Clerkship_ID_2_Court"]').trigger('change');
        // toogle required for 3rd clerkship section
        $('[name$=".Clerkship_ID_3_Court"]', providerContext).on('change', function() {
            const dependentFields = $('[name$=".Clerkship_ID_3_Judge"], [name$=".Clerkship_ID_3_From_Month"], [name$=".Clerkship_ID_3_To_month"], [name$=".Clerkship_ID_3_From_year"], [name$=".Clerkship_ID_3_To_year"]');
            if ($(this).val().length > 0) {
                dependentFields.data('validation', 'required')
                return;
            }
            dependentFields.data('validation', null).each(function(k,v) {
                validateField($(v), true);
            });
        });
        $('#EditProfile [name$=".Clerkship_ID_3_Court"]').trigger('change');
        // toogle required for 4th clerkship section
        $('[name$=".Clerkship_ID_4_Court"]', providerContext).on('change', function() {
            const dependentFields = $('[name$=".Clerkship_ID_4_Judge"], [name$=".Clerkship_ID_4_From_Month"], [name$=".Clerkship_ID_4_To_month"], [name$=".Clerkship_ID_4_From_year"], [name$=".Clerkship_ID_4_To_year"]');
            if ($(this).val().length > 0) {
                dependentFields.data('validation', 'required')
                return;
            }
            dependentFields.data('validation', null).each(function(k,v) {
                validateField($(v), true);
            });
        });
        $('#EditProfile [name$=".Clerkship_ID_4_Court"]').trigger('change');
        // toogle required for 5th clerkship section
        $('[name$=".Clerkship_ID_5_Court"]', providerContext).on('change', function() {
            const dependentFields = $('[name$=".Clerkship_ID_5_Judge"], [name$=".Clerkship_ID_5_From_Month"], [name$=".Clerkship_ID_5_To_month"], [name$=".Clerkship_ID_5_From_year"], [name$=".Clerkship_ID_5_To_year"]');
            if ($(this).val().length > 0) {
                dependentFields.data('validation', 'required')
                return;
            }
            dependentFields.data('validation', null).each(function(k,v) {
                validateField($(v), true);
            });
        });
        $('#EditProfile [name$=".Clerkship_ID_5_Court"]').trigger('change');
        // show all filled clerkship sections
        $('.clerkship-section input, .clerkship-section select', providerContext).each(function(k,v) {
            if (fieldHasVal($(v))) {
                $(v).closest('section').show();
            }
        });
        // display one if none shows up
        const visibleClerkships = $('.clerkship-section:visible', providerContext);
        if (visibleClerkships.length < 1) {
            $('.clerkship-section', providerContext).first().show();
        }
        // hide remove if there is only one section
        if (visibleClerkships.length == 1) {
            $('.remove-clerkship-section', providerContext).hide();
        }
        if (visibleClerkships.length == 5) {
            $('#add-additional-clerkship', providerContext).hide();
        }
        // adding of new clerkship sections
        $('#add-additional-clerkship', providerContext).on('click', function(k,v) {
            $('.clerkship-section:hidden').first().show();
            if ($('.clerkship-section:hidden').length < 1) {
                $(this).hide();
            }
            if ($('.clerkship-section:visible').length > 1) {
                $('.remove-clerkship-section').show();
            }
        });
        // removal of clerkship sections
        $('.remove-clerkship-section', providerContext).on('click', function() {
            const fields = $(this).closest('section').hide().find('input, select').val('');
            focusInputLabel(fields);
            fields.each(function(k,v) {
                validateField($(v), true);
            });
            // hide remove button if there is but one clerkship section
            if ($('.clerkship-section:visible', providerContext).length <= 1) {
                $('.remove-clerkship-section', providerContext).hide();
            }
            // show add clerkship when there already something to hide
            if ($('.clerkship-section:hidden', providerContext).length > 0) {
                $('#add-additional-clerkship', providerContext).show();
            }
        });

        // bar sections
        // show all filled clerkship sections
        $('.bar-section input, .bar-section select', providerContext).each(function(k,v) {
            if (fieldHasVal($(v))) {
                $(v).closest('section').show();
            }
        });
        // display one if none shows up
        const visibleBars = $('.bar-section:visible', providerContext);
        if (visibleBars.length < 1) {
            $('.bar-section').first().show();
        }
        // hide remove if there is only one section
        if (visibleBars.length == 1) {
            $('.remove-bar-section').hide();
        }
        // hide add bar if nothing to hide
        if ($('.bar-section:hidden', providerContext).length < 1) {
            $('#add-additional-bar').hide();
        }
        // adding of new bar sections
        $('#add-additional-bar', providerContext).on('click', function(k,v) {
            $('.bar-section:hidden').first().show();
            if ($('.bar-section:hidden').length < 1) {
                $(this).hide();
            }
            if ($('.bar-section:visible').length > 1) {
                $('.remove-bar-section').show();
            }
        });
        // removal of bar sections
        $('.remove-bar-section', providerContext).on('click', function() {
            const fields = $(this).closest('section').hide().find('input, select').val('');
            focusInputLabel(fields);
            fields.each(function(k,v) {
                if ($(v).prop('name').indexOf('Bar_Country') < 0) {
                    validateField($(v).removeData('validation'), true);
                }
            });
            // hide remove button if there is but one bar section
            if ($('.bar-section:visible').length <= 1) {
                $('.remove-bar-section').hide();
            }
            if ($('.bar-section:hidden').length > 0) {
                $('#add-additional-bar').show();
            }
        });
        // toggle require bar reason Bar_Status -> Bar_Reason
        // bar status 1
        $('[name$=".Bar_Status"]', providerContext).on('change', function() {
            if (["PEND", "SUSP"].indexOf($(this).val()) >= 0 && $('[name$=".Bar_Country"]').val().length > 0) {
                $('[name$=".Bar_Reason"]').data('validation', 'required');
                return;
            }
            validateField($('[name$=".Bar_Reason"]').data('validation', null), true);
        });
        $('#EditProfile [name$=".Bar_Status"]').trigger('change');
        // bar status 2
        $('[name$=".Bar_Status2"]', providerContext).on('change', function() {
            if (["PEND", "SUSP"].indexOf($(this).val()) >= 0 && $('[name$=".Bar_Country_2"]').val().length > 0) {
                $('[name$=".Bar_Reason2"]').data('validation', 'required');
                return;
            }
            validateField($('[name$=".Bar_Reason2"]').data('validation', null), true);
        });
        $('#EditProfile [name$=".Bar_Status2"]').trigger('change');
        // bar status 3
        $('#EditProfile').on('change', '[name$=".Bar_Status3"]', function() {
            if (["PEND", "SUSP"].indexOf($(this).val()) >= 0 && $('[name$=".Bar_Country_3"]').val().length > 0) {
                $('[name$=".Bar_Reason3"]').data('validation', 'required');
                return;
            }
            validateField($('[name$=".Bar_Reason3"]').data('validation', null), true);
        });
        $('#EditProfile [name$=".Bar_Status3"]').trigger('change');

        // bar reasons filter
        $('[name$=".Bar_Reason"], [name$=".Bar_Reason2"], [name$=".Bar_Reason3"]', providerContext).each(function() {
            const reasonField = $(this);
            let barReasonVal = reasonField.val();
            let filtered = [];
            ACTION_REASON_MAP.forEach(function(v, k) {
                switch(v.jobCodeType) {
                    case "includes":
                    if ( v.jobCode.indexOf(parseInt($('#job-code').val())) >= 0 ) {
                        filtered.push(v.reasonCode);
                    }
                    break;
                    case "excludes":
                    if ( v.jobCode.indexOf(parseInt($('#job-code').val())) < 0 ) {
                        filtered.push(v.reasonCode);
                    }
                    break;
                    default:
                    filtered.push(v.reasonCode);
                }
            });
            // filter out action reason based on action reason map
            reasonField.find('option').each(function(k,v) {
                if ($(v).val() != "" && filtered.indexOf($(v).val()) < 0 ) {
                    $(v).remove();
                }
            });
            $(this).val(barReasonVal);
            if ($(this).val() == null) {
                $(this).val('');
            }
        });

        $('[name$=".Bar_Country"], [name$=".Bar_Country_2"], [name$=".Bar_Country_3"]', providerContext).on('change', function() {
            if ($(this).val().length > 0) {
                $(this).closest('.bar-section').find('input, select').each(function(k,v) {
                    if ($(v).prop('name').indexOf('Bar_Country') < 0) {
                        $(v).data('validation', 'required');
                    }
                    $('[name$=".Bar_Status"], [name$=".Bar_Status2"], [name$=".Bar_Status3"]').trigger('change');
                });
                return;
            }
            $(this).closest('.bar-section').find('input, select').each(function(k,v) {
                if ($(v).prop('name').indexOf('Bar_Country') < 0) {
                    validateField($(v).removeData('validation'), true);
                }
            });
        });
        $('[name$=".Bar_Country"], [name$=".Bar_Country_2"], [name$=".Bar_Country_3"]', providerContext).trigger('change');

        // citizenship section
        if (extractCountryFromCode(COUNTRY_CODES, $('#event-location-code').val()) == "HKG") {
            $('[name$=".HK_Perm_Res_1"]').closest('.input_wrapper').hide();
        }
        // passport sections
        // passport section 1
        $('[name$=".Passport_Number_1"]', providerContext).on('keyup paste', function() {
            if ($(this).val().length > 0) {
                const innerSection = $('#visa-inner-section-1').show();
                validateField
                return;
            }
            const citizenshipSection = $('#visa-inner-section-1').hide();
            citizenshipSection.find('input:not(:radio), select').val('');
            citizenshipSection.find('input[type="radio"]').prop('checked', false);
        });
        $('#EditProfile [name$=".Passport_Number_1"]').trigger('paste');
        // passport section 2
        $('[name$=".Passport_Number_2"]', providerContext).on('keyup paste', function() {
            if ($(this).val().length > 0) {
                $('#visa-inner-section-2').show();
                return;
            }
            const section = $('#visa-inner-section-2').hide();
            section.find('input:not(:radio), select').val('');
            section.find('input[type="radio"]').prop('checked', false);
        });
        $('#EditProfile [name$=".Passport_Number_2"]').trigger('paste');
        // passport section 3
        $('[name$=".Passport_Number_3"]', providerContext).on('keyup paste', function() {
            if ($(this).val().length > 0) {
                $('#visa-inner-section-3').show();
                return;
            }
            const section = $('#visa-inner-section-3').hide();
            section.find('input:not(:radio), select').val('');
            section.find('input[type="radio"]').prop('checked', false);
        });
        $('#EditProfile [name$=".Passport_Number_3"]').trigger('paste');
        // passport section 4
        $('[name$=".Passport_Number_4"]', providerContext).on('keyup paste', function() {
            if ($(this).val().length > 0) {
                $('#visa-inner-section-4').show();
                return;
            }
            const citizenshipSection = $('#visa-inner-section-4').hide();
            citizenshipSection.find('input:not(:radio), select').val('')
            citizenshipSection.find('input[type="radio"]').prop('checked', false);
        });
        $('#EditProfile [name$=".Passport_Number_4"]').trigger('paste');
        // visa
        // show all filled visa sections
        $('.visa-section input, .visa-section select', providerContext).each(function(k,v) {
            if (fieldHasVal($(v))) {
                $(v).closest('section').show();
            }
        });
        // show all filled visa sections
        $('.visa-section input, .visa-section select', providerContext).each(function(k,v) {
            if (fieldHasVal($(v))) {
                $(v).closest('section').show();
            }
        });
        // display one if none shows up
        const visibleVisa = $('.visa-section:visible');
        if (visibleVisa.length < 1) {
            $('.visa-section').first().show();
        }
        // hide remove if there is only one section
        if ($('.visa-section:visible').length == 1) {
            $('.remove-visa-section').hide();
        }
        // hide add bar if nothing to hide
        if ($('.visa-section:hidden').length < 1) {
            $('#add-visa').hide();
        }
        // adding of new visa sections
        $('#EditProfile').on('click', '#add-visa', function(k,v) {
            $('.visa-section:hidden').first().show();
            if ($('.visa-section:hidden').length < 1) {
                $(this).hide();
            }
            if ($('.visa-section:visible').length > 1) {
                $('.remove-visa-section').show();
            }
        });
        // removal of visa sections
        $('.remove-visa-section', providerContext).on('click', function() {
            const section = $(this).closest('section');
            const fields = section.hide().find('input:not(:radio), select').val('');
            section.find('input:radio').prop('checked', false);
            focusInputLabel(fields);
            fields.each(function(k,v) {
                validateField($(v), true);
            });
            // hide remove button if there is but one bar section
            if ($('.visa-section:visible').length <= 1) {
                $('.remove-visa-section').hide();
            }
            if ($('.visa-section:hidden').length > 0) {
                $('#add-visa').show();
            }
            section.find('input').each(function(k,v) {
                if ($(v).is(':radio')) {
                    validateField($(v).prop('checked', false).trigger('change'), true);
                }
                if ($(v).prop('name').indexOf('Passport_Number') >= 0) {
                    $(v).trigger('keyup');
                    return;
                }
            });
        });
        // if visa 1 = yes -> display visa 1 type
        $('#EditProfile').on('change', '[name$=".Visa_1"]', function() {
            if ($('[name$=".Visa_1"]:checked').val() == 'Y') {
                $('[name$=".Visa_Type_1"]').closest('.input_wrapper').show();
                $('[name$=".Visa_Country_1"]').val($('[name$=".Citizenship_Country_1"]').val());
                return;
            }
            $('[name$=".Visa_Type_1"]').closest('.input_wrapper').hide();
            $('[name$=".Visa_Country_1"]').val('');
        });
        $('#EditProfile [name$=".Visa_1"]').trigger('change');
        // if visa 2 = yes -> display visa 2 type
        $('#EditProfile').on('change', '[name$=".Visa_2"]', function() {
            if ($('[name$=".Visa_2"]:checked').val() == 'Y') {
                $('[name$=".Visa_Type_2"]').closest('.input_wrapper').show();
                $('[name$=".Visa_Country_2"]').val($('[name$=".Citizenship_Country_2"]').val());
                return;
            }
            $('[name$=".Visa_Type_2"]').closest('.input_wrapper').hide();
            $('[name$=".Visa_Country_2"]').val('');
        });
        $('#EditProfile [name$=".Visa_2"]').trigger('change');
        // if visa 3 = yes -> display visa 3 type
        $('#EditProfile').on('change', '[name$=".Visa_3"]', function() {
            if ($('[name$=".Visa_3"]:checked').val() == 'Y') {
                $('[name$=".Visa_Type_3"]').closest('.input_wrapper').show();
                $('[name$=".Visa_Country_3"]').val($('[name$=".Citizenship_Country_3"]').val());
                return;
            }
            $('[name$=".Visa_Country_3"]').val('');
            $('[name$=".Visa_Type_3"]').closest('.input_wrapper').hide();
        });
        $('#EditProfile [name$=".Visa_3"]').trigger('change');
        // if visa 4 = yes -> display visa 4 type
        $('#EditProfile').on('change', '[name$=".Visa_4"]', function() {
            if ($('[name$=".Visa_4"]:checked').val() == 'Y') {
                $('[name$=".Visa_Type_4"]').closest('.input_wrapper').show();
                $('[name$=".Visa_Country_4"]').val($('[name$=".Citizenship_Country_4"]').val());
                return;
            }
            $('[name$=".Visa_Type_4"]').closest('.input_wrapper').hide();
            $('[name$=".Visa_Country_4"]').val('');
        });
        $('#EditProfile [name$=".Visa_4"]').trigger('change');

        // focus style text and select fields
        $('form').on('focus', 'input[type="text"], select, textarea', function() {
            focusInputLabel($(this), true);
        }).on('blur', 'input[type="text"], select, textarea', function() {
            focusInputLabel($(this));
        });
        // focus field labels
        $.each($('form input[type="text"], form select, form textarea'),function(k,v) {
            focusInputLabel($(v));
        });

        // pass validation data to each fields
        $.each($('[data-fieldgroup-validation]'), function(k,v) {
            $(v).find('input, select, textarea').data('validation', $(v).data('fieldgroup-validation'));
        });
        // pass regex data to each fields
        $.each($('[data-fieldgroup-regex]'), function(k,v) {
            $(v).find('input, textarea').data('regex', $(v).data('fieldgroup-regex'));
        });
        // pass regex message to each fields
        $.each($('[data-fieldgroup-message]'), function(k,v) {
            $(v).find('input, textarea').data('message', $(v).data('fieldgroup-message'));
        });
        // pass validation data length to each fields
        $.each($('[data-fieldgroup-minlength]'), function(k,v) {
            $(v).find('input, textarea').data('minlength', $(v).data('fieldgroup-minlength'));
        });
        $.each($('[data-fieldgroup-maxlength]'), function(k,v) {
            $(v).find('input, textarea').data('maxlength', $(v).data('fieldgroup-maxlength'));
        });
        // pass target label to each radio or checkbox fields
        $.each($('[data-fieldgroup-targetlabel]'), function(k,v) {
            $(v).find('input[type="checkbox"], input[type="radio"]').data('label', $(v).data('fieldgroup-targetlabel'));
        });
        // pass title data to each fields
        $.each($('[data-fieldgroup-title]'), function(k,v) {
            $(v).find('input, select, textarea').data('title', $(v).data('fieldgroup-title'));
        });

        // validate each field by event and field type
        $('form').on('blur click', 'input[type="text"], select, textarea', function() {
            if($(this).is(':visible') && !validateField($(this))) {
                $(this).parent().find('.text-error').css({'display': 'inline-block', 'margin-bottom': '-2px'}); // style hack since IE is such a reliable browser ;-) // changed block to inline-block
            }
        });
        $('form').on('change', 'input[type="checkbox"], input[type="radio"]:not([name$=".Mailing_Address_Same"])', function() {
            validateField($(this));
        });

        // submit the form if no errors
        $('#TaskSummary_ButtonSave', providerContext).on('click', function(e) {
            e.preventDefault();
            errorMapping.clear();
            let formIsValid = true;
            $.each($('form input:not(".datepicker_button"), form select, form textarea'), function(k,v) {
                if($(v).is(':visible') && !validateField($(v))) {
                    formIsValid = false;
                }
            });
            if (formIsValid) {
                doSave_Custom('refer-Complete');
                return;
            }
            let errorMessages = '<strong><small>Found ' + errorMapping.size + ' error(s):</small></strong><br>';
            errorMapping.forEach(function(v,k) {
                errorMessages += '<small style="color: #861F41;">' + v + '</small><br>';
            });
            vex.dialog.alert({ 
                unsafeMessage: errorMessages,
                callback: function() {
                    $("html, body").animate({ scrollTop: 0 }, "slow");
                }
            });
        });
        if (isProfileCompleted) {
            $('[data-add-section], [data-remove-section]').removeClass('bg-jade bg-ignite').addClass('disabled').prop('disabled', 'disabled');
            $('#EditProfile').find('input,select').prop('disabled', 'disabled');
        }
    });
</script>
