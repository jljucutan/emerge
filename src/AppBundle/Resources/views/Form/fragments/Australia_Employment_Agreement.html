<!-- Main QA Area --> 

<!--//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// --> 
<!-- Modal E-Signature box: Note there is a DIV below that is also needed to implement --> 
<div class="modal" id="modal" style="display:none;"> 
  <div class="modal-content"> 
   <h2 class="lifesuite__h2"><strong>Electronic Signature</strong></h2> 
   <p style="fontweight:normal;padding:0px"> 
     <$client.env.eval(client.env.param.verbiage.length()==0? 'I understand that by electronically signing this document by typing my full name below, that I acknowledge, agree and attest that the information provided by me is true and correct and I am freely intending to create and adopt as my own a legally binding electronic signature that carries the same legal effect and enforceability as my handwritten.':client.env.param.verbiage)> 
   </p> 
   <br> 
   <div class="row"> 
     <div class="lifesuite__clearfix"> 
      <b>Type your Name:</b> <input type=text id="eSignature1" class="lifesuite__text-input lifesuite__button.primary:hover ng-invalid" style="width: 99%">&nbsp; 
    </div> 
  </div> 
  <div class="row"> 
   <div class="lifesuite__clearfix lifesuite__float-right" style="margin-right:-15px;"> 
    <input type="button" class="lifesuite__button primary" value="Sign" onClick="validateSignature('signature','eSignature1','printed-employee-name','modal','over','sv','EmpSignatureDate');xbObj('eSignature1').value='';document.getElementById('eSignature1').focus();">&nbsp; 
    <input type="button" class="lifesuite__button" value="Clear" onClick="xbObj('signature').value='';showHide('modal');showHide('over');xbObj('eSignature1').value='';if (typeof targetdatecheckCLEAR == 'function' ){targetdatecheckCLEAR('signature','EmpSignatureDate');}">&nbsp; 
    <input type="button" class="lifesuite__button" value="Cancel" onClick="showHide('modal');showHide('over');xbObj('eSignature1').value='';">
  </div> 
</div> 
</div> 
</div> 
<div class="modal" id="modal2" style="display:none;"> 
  <div class="modal-content"> 
   <h2 class="lifesuite__h2"><strong>Electronic Signature</strong></h2> 
   <p style="fontweight:normal;padding:0px"> 
     <$client.env.eval(client.env.param.verbiage.length()==0? 'I understand that by electronically signing this document by typing my full name below, that I acknowledge, agree and attest that the information provided by me is true and correct and I am freely intending to create and adopt as my own a legally binding electronic signature that carries the same legal effect and enforceability as my handwritten.':client.env.param.verbiage)> 
   </p> 
   <br> 
   <div class="row"> 
     <div class="lifesuite__clearfix"> 
      <b>Type your Name:</b> <input type=text id="eSignature2" class="lifesuite__text-input lifesuite__button.primary:hover ng-invalid" style="width: 99%">&nbsp; 
    </div> 
  </div> 
  <div class="row"> 
   <div class="lifesuite__clearfix lifesuite__float-right" style="margin-right:-15px;"> 
    <input type="button" class="lifesuite__button primary" value="Sign" onClick="validateSignature('signature2','eSignature2','printed-signatory-name','modal2','over','sv2','CompanySignatureDate');xbObj('eSignature2').value='';document.getElementById('eSignature2').focus();">&nbsp; 
    <input type="button" class="lifesuite__button" value="Clear" onClick="xbObj('signature2').value='';showHide('modal2');showHide('over');xbObj('eSignature2').value='';if (typeof targetdatecheckCLEAR == 'function' ){targetdatecheckCLEAR('signature','CompanySignatureDate');}">&nbsp; 
    <input type="button" class="lifesuite__button" value="Cancel" onClick="showHide('modal2');showHide('over');xbObj('eSignature2').value='';"> 
  </div> 
</div> 
</div> 
</div> 
<div id="over" style="display:none;"></div> 
<SCRIPT> 
  showScreen('over') 
</SCRIPT> 
<!--//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// --> 

<!--//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// --> 
<!-- RESPONSIVE eFORM PAGE LOADER--> 

<div class="modal" style="display:block; background: #002E6D;"> 
  <div class="fb-spinner"> 
   <i class="fa fa-2x fa-spinner fa-pulse"></i> 
 </div> 
</div> 

<!--//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// --> 

<form id='australia-employment-agreement' name='frmForm' action="<$link;config.path.RCFolder_FormTemplates>/<$name;<$client.current.parent>>/doSave?<$client.env.QUERY_STRING>" method="post" onsubmit="return SubmitCallback(this);"> 

  <div style="display:none;">
    <$client.env.FormField.Form_Name.prompt>
    <$client.env.FormField.Form_Name.HTML>
    <$client.env.FormField.Form_Type.prompt>
    <$client.env.FormField.Form_Type.HTML>
    <$client.env.FormField.Form_Owner.prompt>
    <$client.env.FormField.Form_Owner.HTML>
    <$client.env.FormField.Form_CreateDate.prompt>
    <$client.env.FormField.Form_CreateDate.HTML>
    <$client.env.FormField.Form_Completed.prompt>
    <$client.env.FormField.Form_Completed.HTML>
    <$client.env.FormField.Form_Delivered.prompt>
    <$client.env.FormField.Form_Delivered.HTML>
    <$client.env.FormField.Form_TaskId.prompt>
    <$client.env.FormField.Form_TaskId.HTML>
    <$client.env.FormField.display_version.HTML>
    <!-- Your Required/Validated Form Fields -->

    <$client.env.formfield.CompanySignature.prompt>
    <$client.env.formfield.CompanySignatureDate.prompt>
    <$client.env.formfield.CompanyName.prompt>
    <$client.env.formfield.EmpSignature.prompt>
    <$client.env.formfield.EmpSignatureDate.prompt>
    <$client.env.formfield.EmpName.prompt>
    <$client.env.formfield.PassportNo.prompt>

  </div>

  <input type="hidden" name="tagparamlist" value="<$client.env.tagparamlist>">

  <!-- Begin HTML Content -->

  <main id='container'  class="container-fluid">
   <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 imgr">
     <img src="logo.png" class="img-responsive" style="max-width: 120px; margin-bottom: 20px;">
   </div>
 </div>

 <div class="margin-bottom-15">
  <div class="row margin-bottom">
    <div class="col-lg-2 col-md-2 col-sm-2 col-xs-12 imgr margin-bottom">
     <p style="font-size: 10px; margin-bottom: 0px!important;">PayPal Australia Pty Limited</p>
     <p style="font-size: 10px; margin-bottom: 0px!important;">ABN 93 111 195 389</p>
     <p style="font-size: 10px; margin-bottom: 0px!important;">Level 23, 1 York Street</p>
     <p style="font-size: 10px; margin-bottom: 0px!important;">Sydney NSW 2000 Australia</p>
   </div>
   <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12 inner-wrapper">
    <div id='incomplete'> 
     <div id="markup"></div>
   </div>
   <div id='complete'></div>
 </div>
</div>
</div >

<div id='fields'>
  <div class="row">
   <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
    <h5><span class="signature-section-title">Employee:</span></h5>
  </div>
</div>
<div class="row">
 <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">
  <label class="control-label">Signature: <span class="font-red">*</span> </label>
</div>
<div class="col-lg-5 col-md-5 col-sm-12 col-xs-12" style="margin-bottom: 15px;">
 <$client.env.FormField.EmpSignature.html>
</div>

<div class="col-lg-1 col-md-1 col-sm-12 col-xs-12">
  <label class="control-label">Date: </label>
</div>
<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
  <div class="form-group">
   <$client.env.FormField.EmpSignatureDate.html>
 </div>
</div>
</div>
<div class="row">
 <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">
  <label class="control-label">Name: </label> 
</div>
<div class="col-lg-5 col-md-5 col-sm-12 col-xs-12 margin-bottom-20">
  <div class="form-group">
   <$client.env.FormField.EmpName.html>
 </div>
</div>

</div>
<div class="row">
 <div class="col-sm-12">&nbsp;</div>
</div>
<div class="row">
 <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
  <h5><span class="signature-section-title">Employer:</span></h5>
</div>
</div>


<div class="row">
 <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">
  <label class="control-label">Signature: <span class="font-red">*</span> </label>
</div>
<div class="col-lg-5 col-md-5 col-sm-12 col-xs-12" style="margin-bottom: 15px;">
  <$client.env.FormField.CompanySignature.html>
</div>

<div class="col-lg-1 col-md-1 col-sm-12 col-xs-12">
  <label class="control-label">Date: </label>
</div>
<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
  <div class="form-group">
   <$client.env.FormField.CompanySignatureDate.html>
 </div>
</div>
</div>

<div class="row">
  <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">
    <label class="control-label">Name: </label> 
  </div>
  <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
    <div class="form-group">
     <$client.env.FormField.CompanyName.html>
   </div>
 </div>
</div>


</div>
<hr class="lifesuite__hr">


<div class="row" id="formButtons" style="display: none;">
  <div class="lifesuite__clearfix lifesuite__float-right">                
   <$client.env.FormButtons> 
 </div>
</div>

</main> 

<div style="display:none;">
  <div id="markup2"></div>
  <div id="markup3"></div>
  <div id="markup4"></div>
  <$client.env.formfield.headerpg1.html>
  <$client.env.formfield.hidden_pg.html>
  <$client.env.formfield.hidden_pg2.html>
  <$client.env.formfield.hidden_pg3.html>
  <$client.env.formfield.hidden_pg4.html>
  <$client.env.formfield.SignatureVerification.html>
  <$client.env.formfield.SignatureVerification2.html>
  <$client.env.formfield.State.html>
  <$client.env.FormField.recruiter_signature.html>
  <$client.env.FormField.recruiter_name.html>
  <span id="evtRecruiter"><$client.tEventManagers_Person_12.First_Name> <$client.tEventManagers_Person_12.Last_Name></span>
  <span id="assignee"><$client.account.username_first> <$client.account.username></span>
  <$client.env.FormField.SignatoryStamp.HTML>
  <$client.env.FormField.EmployeeStamp.HTML>
</div>

</form>

<script>

//Show populated form if already completed
var strCompletedForm = FORM_COMPLETED;
if (strCompletedForm != "")
{
//Gather the fields that need to be displayed
//For images we need to setup the image tag. 
var imgHeader = "<img src='<$client.env.formfield.headerpg1.value>' />";
var imgVPSignature = "<img src='<$client.env.formfield.vpsignature.value>' />";

//Create an array of info to pass to complete the offer letter
//0 for images sending an image tag, 1 for sections of text sneding the ID of the field that holds the HTML.
var arrParts = [
[1,'hidden_pg']
];
//Send (ID of the div to hide,ID of the div to show,Parts to get the offer letter)
showCompletedOfferLetter('incomplete','complete',arrParts);
} else {
//If the offer letter is not complete set up the logos and link field values.

//pickDivisionLogo();
//SetImageOnOfferLetter('headerpg1');
//SetImageOnOfferLetter('vpsignature');
}

</script>

<script type="text/javascript" src="<$link;/main/RedCarpet/FormTemplates/FormSupport/js/bootstrap.min.js>"></script>
<script type="text/javascript" src="<$link;/main/RedCarpet/FormTemplates/FormSupport/js/front_validator.js>"></script> 
<script type="text/javascript" src="<$link;/main/RedCarpet/FormTemplates/Australia_Employment_Agreement/script_Version_4.js>"></script>

<script type="text/javascript"> 

    ChangeCalendarIcons(); //for popup calendar  
    disableCalButton("signDate"); //disable sign date field

    $(window).ready(function() { 
      "use strict";
      $("#buttonCancel").removeClass("appInputButton RCappInputButtonOrange RCappInputButtonBlue"); 
      $("#buttonCancel").addClass("lifesuite__button"); 
      $('#buttonCancel').attr('id','ButtonCancel'); 
      $("#buttonSave").removeClass("appInputButton RCappInputButtonBlue"); 
      $("#buttonSave").addClass("lifesuite__button primary"); 
      $('#buttonSave').attr('id','ButtonSave'); 
      $("#buttonSaveAndComplete").removeClass("appInputButton RCappInputButtonBlue"); 
      $("#buttonSaveAndComplete").addClass("lifesuite__button primary"); 
      $('#buttonSaveAndComplete').attr('id','ButtonSaveAndComplete').removeAttr('onclick'); ; 
      $("#buttonPrint").removeClass("appInputButton RCappInputButtonOrange RCappInputButtonBlue"); 
      $("#buttonPrint").addClass("lifesuite__button"); 
      $('#buttonPrint').attr('id','ButtonPrint'); 
      $("#buttonPreviewDelete").removeClass("appInputButton RCappInputButtonRed"); 
      $("#buttonPreviewDelete").addClass("lifesuite__button"); 
      $('#buttonPreviewDelete').attr('id','ButtonPreviewDelete'); 
      $("#buttonPreviewSave").removeClass("appInputButton RCappInputButtonBlue"); 
      $("#buttonPreviewSave").addClass("lifesuite__button primary"); 
      $('#buttonPreviewSave').attr('id','ButtonPreviewSave'); 
      $("#buttonComplete").removeClass("appInputButton RCappInputButtonBlue"); 
      $("#buttonComplete").addClass("lifesuite__button primary"); 
      $('#buttonComplete').attr('id','ButtonComplete'); 

      document.getElementById('formButtons').style.display = "block"; 

      $("input[type=text]").addClass('lifesuite__text-input'); 
      $("input[type=text].hasDatepicker").addClass('dateField'); 
      $("select").addClass('lifesuite__select-input'); 
      $("input[type=radio]").addClass('lifesuite__radio'); 
      $("input[type=checkbox]").addClass('lifesuite__checkbox'); 
      $("textarea").addClass('lifesuite__textarea-input'); 
      $('label').addClass('lifesuite__input-label lifesuite__inputâ€”block'); 

$('.modal').on('shown.bs.modal', function() {
$(this).find('input[type="text"]');
});

      $('#australia-employment-agreement').on('click change', 'input:visible[type="radio"]', function() {
        validateField($(this));
      });

      $('#australia-employment-agreement').on('change', 'input:visible:not(#signature):not(:button), select:visible', function() {
        validateField($(this));
      });

      $('#modal').on('click', 'input.lifesuite__button', function() {
        validateField($('#signature'));
        validateField($('#sign-date-container .cal_and_button input:not(:button)'), true);
      });
      $('#modal2').on('click', 'input.lifesuite__button', function() {
        validateField($('#signature2'));
        validateField($('#sign-date-container2 .cal_and_button input:not(:button)'), true);
      });

      $('#ButtonPrint, #buttonPrint, #ButtonSaveAndComplete, #buttonSaveAndComplete').on('click', function(e) {
        var formIsValid = true, btn = $(this);
        e.preventDefault();
        $.each($('#australia-employment-agreement input:visible:not(:button), #australia-employment-agreement select:visible'), function(k, v) {
          if(false == validateField($(v)) && $(v).is(':visible')) {
            formIsValid = false;
          }
        });
        if (formIsValid) {
          switch (btn.attr('id')) {
            case 'ButtonPrint':
            $('.marked').popover('hide'); 
            $('.popover').remove();
            funcPrint();
            break;
            case 'ButtonSaveAndComplete':
              $('.marked').popover('hide'); 
              $('.popover').remove();
              completeStamp("<$client.env.eval((client.role.rc_australia_company_signatory==1)?'SignatoryStamp':'')>");
              completeStamp("<$client.env.eval((url.forWhom==account.userguid)?'EmployeeStamp':'')>");
              void(funcSaveAndComplete());
            break;
          }
        }
      });


}); 

$( window ).resize(function() { 
 
document.getElementById('over').style.width=''; 
 
}); 

    $('#buttonPrint').removeAttr('onclick');
    $('#buttonSaveAndComplete').removeAttr('onclick');
    disableCalButton('date-disabled');
  </script>
  <script>

$(document).ready(function(){
  "use strict";
  var assignee = "<$client.account.username_first> <$client.account.username>";
  var recruiter = "<$client.tEventManagers_Person_12.First_Name> <$client.tEventManagers_Person_12.Last_Name>"; //using APAC Recruiter
  var recruiter_signature = document.getElementById('recruiter_signature');
  var recruiter_name = document.getElementById('recruiter_name');
  var rec_name =  document.getElementById('printed-signatory-name');
  var emp_name=  document.getElementById('printed-employee-name');//2018-09-14 - added employee name var
  if(!$('#signature2').val().length) {
    recruiter_name.value = <$client.env.eval((client.role.rc_australia_company_signatory==1)?'assignee':'null')>;
    $('#printed-signatory-name').val(<$client.env.eval((client.role.rc_australia_company_signatory==1)?'assignee':'null')>);
  }

//2018-09-14 - START - Condition to pre-populate employee name
  if(!$('#signature').val().length) {
    emp_name.value = <$client.env.eval((url.forWhom==account.userguid)?'assignee':'null')>;
  }
//2018-09-14 - END - Condition to pre-populate employee name

  var isSignatory = <$client.env.eval((client.role.rc_australia_company_signatory==1)?'true':'false')>;
  var isEmployee = <$client.env.eval((url.forWhom==account.userguid)?'true':'false')>;
  var isRecruiter= <$client.env.eval((client.tEventManagers_Person_8.UserGuid==account.userguid)?'true':'false')>;

  var init = function() {
    if($('#SignatoryStamp').prop('readonly')) {
      $('#signature, #signature2, .startDate').prop('onfocus',null);
      return false;
    }
    if (isSignatory && parseInt($('#SignatoryStamp').val()) === 0) { /* Fix client issue (When the company signatory signs or employee signs, the company signatory completed signature information is not captured. ) - 2018-09-07*/
      $('#signature2, #printed-employee-name').val('');
      $('#SignatoryStamp').val(1);
      setTimeout(function() {
        $('.signDate, .signDate2, #sv2').val('');
      }, 400);
    }
    if (isSignatory || (isEmployee &&  parseInt($('#EmployeeStamp').val()) === 0)) {
      // $('#signature, #printed-employee-name').val('');//2018-09-14 -  SET #printed-employee-name VALUE TO NULL
      // previous fixes above is temporarily disabled until it is clear what it issue it fixes
      $('#signature').val('');//2018-09-14 -  SET #printed-employee-name VALUE TO NULL
      $('#EmployeeStamp').val(1);
      setTimeout(function() {
        $('.signDate, #sv').val('');
      }, 400);
    }
   if(!isEmployee && !isSignatory) {
      $('#signature2, #signature, #printed-signatory-name,#printed-employee-name, #name1, #sv, #sv2').val('');//2018-09-14 -  SET #printed-employee-name VALUE TO NULL
      setTimeout(function() {
        $('.signDate, .signDate2').val('');
      }, 400);
      $('#complimentary-close-signer').remove();
    }
  }
  setTimeout(init(),400);

  // populate complimentary close
  $('.signDisplay2').text($('#printed-signatory-name').val());

  var isNewhire = $('#hidden_pg').prop('readonly') || <$client.env.eval((url.forWhom==account.userguid)?'true':'false')>; 

  if (isNewhire) {  
    $('#tablePopup').addClass('deactivate-highlight');  
  } 

  // When the field is not populated, the form should display a highlighted blank space.  
  $('mark').each(function(x){  
    if($('mark').eq(x).html().length <= 0){  
      $('mark').eq(x).html('&nbsp;');  
    }  
  }); 

  var loadFriendlyTexts = function() { 
    if (!isNewhire) { 
      setTimeout(function() { 
        $('.marked').popover({ 
          'trigger': 'manual' 
        }).popover('show'); 
        $('.popover-content').addClass('text-uppercase') 
      }, 500);  
    } 
  } 

  loadFriendlyTexts(); 

  $(window).on('resize', function() { 
    loadFriendlyTexts(); 
  });

});

  $('.signDate, .signDate2').parent().find('input').prop('disabled', true);

var myVar = setInterval(function(){ 
if(document.getElementById('modal2').style.display=='block') {
document.getElementById('ButtonSave').focus()
document.getElementById('eSignature2').focus()
clearInterval(myVar) 
}}, 500);

var myVar2 = setInterval(function(){ 
if(document.getElementById('modal').style.display=='block') {
document.getElementById('ButtonSaveAndComplete').focus()
document.getElementById('eSignature1').focus()
clearInterval(myVar2) 
}}, 500);

  </script>
